%% Generated by Sphinx.
\def\sphinxdocclass{article}
\documentclass[a4paper,12pt,english]{sphinxhowto}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax
\PassOptionsToPackage{svgnames}{xcolor}
\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{times}
\expandafter\ifx\csname T@LGR\endcsname\relax
\else
% LGR was declared as font encoding
  \substitutefont{LGR}{\rmdefault}{cmr}
  \substitutefont{LGR}{\sfdefault}{cmss}
  \substitutefont{LGR}{\ttdefault}{cmtt}
\fi
\expandafter\ifx\csname T@X2\endcsname\relax
  \expandafter\ifx\csname T@T2A\endcsname\relax
  \else
  % T2A was declared as font encoding
    \substitutefont{T2A}{\rmdefault}{cmr}
    \substitutefont{T2A}{\sfdefault}{cmss}
    \substitutefont{T2A}{\ttdefault}{cmtt}
  \fi
\else
% X2 was declared as font encoding
  \substitutefont{X2}{\rmdefault}{cmr}
  \substitutefont{X2}{\sfdefault}{cmss}
  \substitutefont{X2}{\ttdefault}{cmtt}
\fi


\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}
\addto\captionsenglish{\renewcommand{\contentsname}{Contents:}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{2}

\usepackage{cedhar}

\title{Cedhar Documentation}
\date{Dec 22, 2020}
\release{0.0.7}
\author{JARO}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}



\section{Digital Humanities}
\label{\detokenize{DDHH:digital-humanities}}\label{\detokenize{DDHH:ddhh}}\label{\detokenize{DDHH::doc}}
The use of digital technologies to pursue research questions in the humanities.


\subsection{Data for humanities}
\label{\detokenize{DDHH:data-for-humanities}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{)}%
\item {} 
Document markup languages
\begin{itemize}
\item {} 
\sphinxstylestrong{ConTeXt} a TeX macro package that has a cleaner interface to control typography of the document while retaining LaTeX’s structure\sphinxhyphen{}oriented approach
\begin{itemize}
\item {} 
with separation of content and presentation, it can format XML text, …

\end{itemize}

\item {} 
\sphinxstylestrong{EAD} (\sphinxstyleemphasis{Encoded Archival Description})

\item {} 
…

\end{itemize}

\item {} 
Citation
\begin{itemize}
\item {} 
\sphinxstyleemphasis{Arts and Humanities Citation Index} (AHCI)
\begin{itemize}
\item {} 
Machine\sphinxhyphen{}readable bibliographic record \sphinxhyphen{} MARC, RIS, BibTeX

\end{itemize}

\end{itemize}

\item {} 
Geospatial/geographical data
\begin{itemize}
\item {} 
\sphinxstylestrong{GeoJSON} is a geospatial data interchange format based on \sphinxstyleemphasis{JavaScript Object Notation} (JSON).

\item {} 
\sphinxstylestrong{Leaflet} is an open\sphinxhyphen{}source JavaScript library for mobile\sphinxhyphen{}friendly, cross\sphinxhyphen{}browser, interactive maps.

\item {} 
A Web Map Service (\sphinxstylestrong{WMS}) is a standard protocol for serving georeferenced map images over the Internet that are generated by a map server using data from a GIS database.
\begin{itemize}
\item {} 
See also Web Feature Service (\sphinxstylestrong{WFS})

\end{itemize}

\end{itemize}

\end{enumerate}


\index{data\sphinxhyphen{}formats@\spxentry{data\sphinxhyphen{}formats}}\ignorespaces 

\subsection{Data formats}
\label{\detokenize{DDHH:data-formats}}\label{\detokenize{DDHH:index-0}}
Data can be stored in different formats.



\subsubsection{JSON structure}
\label{\detokenize{DDHH:json-structure}}\label{\detokenize{DDHH:json-str}}
JSON stands for JavaScript Object Notation and it is based on the JavaScript Programming Language Standard ECMA\sphinxhyphen{}262.

JSON is built on two structures, namely a collection of name/value pairs, and an ordered list of values.
A JSON structure looks like:
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{Object} \PYG{p}{\PYGZob{}}
        \PYG{n}{Identifier}\PYG{p}{:} \PYG{n}{Value}
        \PYG{n}{Identifier}\PYG{p}{:} \PYG{n}{Array} \PYG{p}{[}
           \PYG{n}{Object} \PYG{p}{\PYGZob{}}
                   \PYG{n}{Identifier}\PYG{p}{:} \PYG{n}{Value}
          \PYG{p}{\PYGZcb{}}
        \PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\end{quote}

Where an \sphinxcode{\sphinxupquote{Identifier}} is delimited by quotes, and a \sphinxcode{\sphinxupquote{Value}} can be a \sphinxcode{\sphinxupquote{string}}, a \sphinxcode{\sphinxupquote{number}}, \sphinxcode{\sphinxupquote{"true"}}, \sphinxcode{\sphinxupquote{"false"}}, \sphinxcode{\sphinxupquote{"null"}},
or an \sphinxcode{\sphinxupquote{Array}} or another JSON \sphinxcode{\sphinxupquote{Object}} as the above example.


\paragraph{JSON in R}
\label{\detokenize{DDHH:json-in-r}}
Some R packages for reading JSON files in CRAN are
\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{rjson}} v0.1.0    released on Jul 30  2007

\item {} 
\sphinxcode{\sphinxupquote{RJSONIO}} v0.3\sphinxhyphen{}1  released on Oct  4  2010

\item {} 
\sphinxcode{\sphinxupquote{jsonlite}} v0.9.0 released on Dec  3  2013

\end{itemize}



\subsubsection{eXtensible Markup Language}
\label{\detokenize{DDHH:extensible-markup-language}}\label{\detokenize{DDHH:xml-str}}\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{DDHH:id1}}Todo:}
eXtensible markup language (XML) structure
\end{sphinxadmonition}
\end{quote}



\subsubsection{Lightweight markup languages}
\label{\detokenize{DDHH:lightweight-markup-languages}}\label{\detokenize{DDHH:rst-str}}
Lightweight markup languages are for producing documentation on the Web.



\paragraph{Markdown}
\label{\detokenize{DDHH:markdown}}
\sphinxstylestrong{Markdown} (MD), with suffixes \sphinxcode{\sphinxupquote{.md}}, \sphinxcode{\sphinxupquote{.Rmd}}, etc., is currently the markup language for GitHub,
and hence very popular among developers using this platform. The popularity of this format for writing
for the web is however challenging its consistency and robustness, and today there are several flavours of MD:
\begin{itemize}
\item {} 
Basics and syntax of the \sphinxstyleemphasis{“Gruber Markdown”} are in the \sphinxhref{https://daringfireball.net/projects/markdown/}{creator’s webpage}

\item {} 
\sphinxstyleemphasis{CommonMark} is an extension of the Gruber Markdown by users including representatives from GitHub, Stack Exchange, and Reddit, and therefore today “de facto” standard on the Web.

\item {} 
\sphinxstyleemphasis{Github Flavored Markdown} or \sphinxstyleemphasis{GFM} is a superset of CommonMark with Github\sphinxhyphen{}specific extensions on syntax features.

\item {} 
Other flavours of Markdown include \sphinxstyleemphasis{MultiMarkdown}, \sphinxstyleemphasis{Markdown Extra}, \sphinxstyleemphasis{CriticMarkup}, \sphinxstyleemphasis{Ghost Markdown}, and others…

\end{itemize}



\paragraph{reStructuredText}
\label{\detokenize{DDHH:restructuredtext}}
\sphinxstylestrong{reStructuredText} (RST) is written with the suffix \sphinxcode{\sphinxupquote{.rst}} or \sphinxcode{\sphinxupquote{.txt}} since is plaintext, which use simple and intuitive
constructs to structure complex technical documentation. Here “complex” means things like indexing, glossaries, etc.

One significant innovation of Markdown was the use of headers and interpreted text. However, a step further
of RST over MD is the use of \sphinxstyleemphasis{directives} and \sphinxstyleemphasis{specialized roles}. For example, these features allow reStructuredText
rendering text and math formulae directly into LaTeX format.

The directive syntax in RST is
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{o}{.}\PYG{o}{.} \PYG{n}{directive}\PYG{o}{\PYGZhy{}}\PYG{n+nb}{type} \PYG{p}{:}\PYG{p}{:} \PYG{n}{directive}
\PYG{n}{block}
\end{sphinxVerbatim}
\end{quote}

and an illustration of a standard and specialized role is
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{o}{*}\PYG{n}{emphasis}\PYG{o}{*} \PYG{k}{as} \PYG{n}{standard} \PYG{n}{role}
\PYG{p}{:}\PYG{n}{title}\PYG{p}{:}\PYG{o}{*}\PYG{n}{emphasis}\PYG{o}{*} \PYG{k}{with} \PYG{n}{explicit} \PYG{n}{role}
\end{sphinxVerbatim}
\end{quote}

where (most) of standard roles are common for interpreted text in MD and RST.

In order to produce a documentation, either in HTML or in LaTeX, reStructuredText needs a \sphinxstyleemphasis{builder}, which is
a program that convert the RST source code into the desired format.

Popular builders are  the \sphinxcode{\sphinxupquote{Python}} package \sphinxcode{\sphinxupquote{docutils}} with different options:
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{prompt}\PYG{o}{\PYGZgt{}} \PYG{o}{.}\PYG{o}{/}\PYG{n}{rst2html}\PYG{o}{.}\PYG{n}{py} \PYG{n}{text}\PYG{o}{.}\PYG{n}{rst} \PYG{o}{\PYGZgt{}} \PYG{n}{text}\PYG{o}{.}\PYG{n}{html}
\PYG{n}{prompt}\PYG{o}{\PYGZgt{}} \PYG{o}{.}\PYG{o}{/}\PYG{n}{rst2latex}\PYG{o}{.}\PYG{n}{py} \PYG{n}{text}\PYG{o}{.}\PYG{n}{rst} \PYG{o}{\PYGZgt{}} \PYG{n}{text}\PYG{o}{.}\PYG{n}{tex}
\end{sphinxVerbatim}
\end{quote}

where RST sources are in a \sphinxstyleemphasis{source} folder and constructs go into a \sphinxstyleemphasis{build} folder.

Another alternative is \sphinxcode{\sphinxupquote{Sphinx}} that constructs the API documentation with the two folders and perform
the transformation afterwards.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{prompt}\PYG{o}{\PYGZgt{}} \PYG{o}{.}\PYG{o}{/}\PYG{n}{sphinx}\PYG{o}{\PYGZhy{}}\PYG{n}{build} \PYG{p}{[}\PYG{n}{options}\PYG{p}{]} \PYG{n}{html} \PYG{n}{source} \PYG{n}{build}
\PYG{n}{prompt}\PYG{o}{\PYGZgt{}} \PYG{o}{.}\PYG{o}{/}\PYG{n}{sphinx}\PYG{o}{\PYGZhy{}}\PYG{n}{build} \PYG{p}{[}\PYG{n}{options}\PYG{p}{]} \PYG{n}{latex} \PYG{n}{source} \PYG{n}{build}
\end{sphinxVerbatim}
\end{quote}



\subsubsection{TeX and LaTeX}
\label{\detokenize{DDHH:tex-and-latex}}\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{DDHH:id2}}Todo:}
TBD
\end{sphinxadmonition}
\end{quote}



\subsubsection{Another data format}
\label{\detokenize{DDHH:another-data-format}}\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{DDHH:id3}}Todo:}
TBD
\end{sphinxadmonition}
\end{quote}



\section{User Acceptance Testing}
\label{\detokenize{UAT:user-acceptance-testing}}\label{\detokenize{UAT::doc}}
User Acceptance Test or {[}UTA{]} is a type of testing performed by the Client to certify
the system with respect to the requirements that was agreed upon. This report is to
illustrate the application of {[}UTA{]} in developing, testing, and releasing a new or updated
\sphinxcode{\sphinxupquote{R}} package.


\subsection{User Acceptance Test for R package release}
\label{\detokenize{UAT:user-acceptance-test-for-r-package-release}}
In the DTAP process (development \(\to\) test \(\to\) acceptance \(\to\) production),
which is part of a software development process, the release of a new
version of an \sphinxcode{\sphinxupquote{R}} package is at the final
step where the deployment needs to meet certain requirements. The
“acceptance” portion in this process comes from both \sphinxstyleemphasis{humans}
(developer and clients) and \sphinxstyleemphasis{machines} (a list of rules that the
software must conform). Of course, human testing involves machines as
well, and this distinction is made for referring to a systematic way of
testing.



\subsubsection{Human testing}
\label{\detokenize{UAT:human-testing}}
The development of a software component on a local machine has folders
containing a set of functions in a structure like this

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{FOLDER}\PYG{o}{\PYGZhy{}}\PYG{n}{BUILD}
\PYG{n}{FOLDER}\PYG{o}{\PYGZhy{}}\PYG{n}{PUB}
\PYG{n}{Batch} \PYG{n}{file} \PYG{n}{to} \PYG{n}{build}
\end{sphinxVerbatim}

where the testing of the software occurs in the three parts.

A set of \sphinxcode{\sphinxupquote{R}} functions are written in
\sphinxtitleref{FOLDER\sphinxhyphen{}BUILD} with a version control, and then the functions are tested
manually in the \sphinxcode{\sphinxupquote{R}} console or other
environment. It is important at this stage that the test involves random
data, different data sets, and the extreme cases that the input data may
have like zeroes, empty arrays, etc. Once there is an acceptance from the
developer, \sphinxtitleref{FOLDER\sphinxhyphen{}PUB} hosts a copy of the functions to publish and then
the building with the \sphinxtitleref{batch file}.

The batch file has the instructions in a sequential list to build the
package that typically are \sphinxcode{\sphinxupquote{R}} core functions to load files, write or
recreate an object to a file, and the creation of a skeleton for a new
source package.

Once the package is built then comes the documentation of the functions
with files in a Latex format that conform the manual. The machine
testing, which comes afterwards, will check among other things whether
there is a correspondence or not between the script codes and the
documentation.



\subsubsection{Machine testing}
\label{\detokenize{UAT:machine-testing}}
In the MS Windows operating system, \sphinxhref{https://cran.r-project.org/bin/windows/Rtools/}{Rtools}
allows performing a machine testing of \sphinxcode{\sphinxupquote{R}} packages. First the package is constructed as a
tarball file with the command line and by typing \sphinxcode{\sphinxupquote{R CMD build}}. Then the
\sphinxcode{\sphinxupquote{R CMD check}} performs different types of tests on this file based on pass/fail
results where “fail” involves errors, warnings, and notes. The option
\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}as\sphinxhyphen{}cran}} applies the most strict rules on the package and allows a
successful submission for a publication on the CRAN repository whenever
there is any fail.

An example of a successful testing is in the \sphinxcode{\sphinxupquote{.log}} file given as
appendix where the checking starts in the \sphinxcode{\sphinxupquote{DESCRIPTION}} file with the
basic information about the package. Then there is also a testing of
things like whether the package can be loaded and unloaded, and
consistencies both in the code and the documentation including meta
data.

Another machine testing engine is \sphinxcode{\sphinxupquote{Travis CI}} that runs online with a browser.



\subsubsection{UAT for users in GitHub}
\label{\detokenize{UAT:uat-for-users-in-github}}
As with machine testing, the acceptance tests among users of the
\sphinxcode{\sphinxupquote{R}} package should reveal as well a
straightforward yes/no or pass/fail results. This means that the user
should be able to download, install, uninstal, and run the software
without any errors.

Another important component of the user acceptance is counting with a
shared infrastructure that team members administer, use on a day\sphinxhyphen{}to\sphinxhyphen{}day
basis and can reflect on and implement for others. GitHub is not only a
git repository, but it is also a tool suitable for educational tasks
such as periodical reflection and implementation for others.

GitHub storages the information and it can be used as well as backup for
disaster recovery. In many cases GitHub is the place where the users
report bugs, and where ideally users should become developers of the
package as well.



\subsubsection{UAT exercise}
\label{\detokenize{UAT:uat-exercise}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{)}%
\item {} 
Install the beta version of the package from GitHub plus dependencies into the R environment

\item {} 
Load the package and run the scripts of the \sphinxtitleref{README.md} file

\item {} 
Run the program with different datasets

\end{enumerate}
\begin{itemize}
\item {} 
if an error occurs then consult the manual to fix the input data

\item {} 
if the data introduced conforms the requirements from the manual and the error remains then report the bug

\end{itemize}

A successful user acceptance test has no errors, and the user is willing
to use the package in his/her own work.


\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{UAT:id1}}Todo:}
UAT for data science and ML engineering
\end{sphinxadmonition}
\end{quote}



\section{The SDAM project}
\label{\detokenize{sdam:the-sdam-project}}\label{\detokenize{sdam:sdam-proj}}\label{\detokenize{sdam::doc}}
SDAM stands for \sphinxstylestrong{Social Dynamics and complexity in the Ancient Mediterranean},
which is a research group at the \sphinxhref{https://cas.au.dk/}{School of Culture and Society} at
Aarhus University (AU).



\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|T|}
\hline

\noindent\sphinxincludegraphics[width=200\sphinxpxdimen]{{sdam_logo2}.png}
&
\noindent\sphinxincludegraphics{{sdam_logo}.png}
&
\noindent\sphinxincludegraphics{{AUlogo}.png}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}



\subsection{Objectives}
\label{\detokenize{sdam:objectives}}
The two mains outputs of this project are expected to be
\begin{itemize}
\item {} 
A comparative study of proxies for evolution of social complexity in the Ancient Mediterranean.

\item {} 
Digital tools, workflows and processes that scale and that historians and archaeologists can use in their own research.

\end{itemize}


\begin{itemize}
\item {} 
See \sphinxhref{https://sdam-au.github.io/sdam-au/}{SDAM Website}

\item {} 
See \sphinxhref{https://github.com/sdam-au/}{SDAM on GitHub}

\end{itemize}



\section{R package \sphinxstyleliteralintitle{\sphinxupquote{sdam}}}
\label{\detokenize{sdam:r-package-sdam}}\label{\detokenize{sdam:sdam-pkg}}

\subsection{Package Description}
\label{\detokenize{sdam:package-description}}
The \sphinxhref{https://sdam-au.github.io/sdam/}{R package “sdam”} provides tools for performing
analyses within Social Dynamics and complexity in the Ancient Mediterranean
(\sphinxhref{https://sdam-au.github.io/sdam-au/}{SDAM}) project.
\begin{itemize}
\item {} 
(See \sphinxhref{https://github.com/mplex/cedhar/blob/master/typesetting/reports/sdam.pdf}{“sdam” manual})

\end{itemize}


Currently, it is possible with \sphinxcode{\sphinxupquote{sdam}} to access data from the Epigraphic Database Heidelberg API
with \sphinxcode{\sphinxupquote{get.edh()}}, and the wrapper function \sphinxcode{\sphinxupquote{get.edhw()}} as well. Most of the data is available
in the dataset attached to the package, which is called \sphinxcode{\sphinxupquote{EDH}}.

For applications of these functions and use of this dataset:
\begin{itemize}
\item {} 
(See {\hyperref[\detokenize{Epigraphic:edh}]{\sphinxcrossref{\DUrole{std,std-ref}{Epigraphic Database Heidelberg}}}})

\item {} 
(See {\hyperref[\detokenize{EpigraphicNetwork:edh-net}]{\sphinxcrossref{\DUrole{std,std-ref}{Epigraphic Networks using R}}}})

\end{itemize}


Besides, the \sphinxcode{\sphinxupquote{request()}} function allows performing different types of HTTP requests to a cloud
repository like DEiC’S \sphinxurl{https://sciencedata.dk} or another customized URL address.
\begin{itemize}
\item {} 
(See {\hyperref[\detokenize{Sciencedata_dk:deic-sddk}]{\sphinxcrossref{\DUrole{std,std-ref}{DEiC’s sciencedata.dk}}}} for applications of this function.)

\end{itemize}


Similarity by simple matching among column vectors is achieved by the \sphinxcode{\sphinxupquote{simil()}} function in order
to make analyses of assemblages or artifacts. Note that this latter function still under early
development.
\begin{itemize}
\item {} 
(See {\hyperref[\detokenize{EpigraphicNetwork:edh-net}]{\sphinxcrossref{\DUrole{std,std-ref}{Epigraphic Networks using R}}}} for applications of this function.)

\end{itemize}

\begin{quote}


\sphinxstrong{See also:}


Package \sphinxcode{\sphinxupquote{multigraph}}. Versions:
{[}\sphinxhref{https://CRAN.R-project.org/package=multigraph}{CRAN}{]},
{[}\sphinxhref{https://github.com/mplex/multigraph}{GitHub}{]}.

Package \sphinxcode{\sphinxupquote{multiplex}}. Versions:
{[}\sphinxhref{https://CRAN.R-project.org/package=multiplex}{CRAN}{]},
{[}\sphinxhref{https://github.com/mplex/multiplex}{GitHub}{]}.


\end{quote}



\subsection{Package installation}
\label{\detokenize{sdam:package-installation}}\label{\detokenize{sdam:sdam-inst}}
You can install the \sphinxcode{\sphinxupquote{sdam}} package from these GitHub repositories using  the \sphinxcode{\sphinxupquote{R}} console
or RStudio if you wish.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} install beta version}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{devtools}\PYG{o}{::}\PYG{n+nf}{install\PYGZus{}github}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{mplex/cedhar\PYGZdq{}}\PYG{p}{,} \PYG{n}{subdir}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{pkg/sdam\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

or

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} install release candidate}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{devtools}\PYG{o}{::}\PYG{n+nf}{install\PYGZus{}github}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{sdam\PYGZhy{}au/sdam\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{quote}

\begin{sphinxadmonition}{note}{Note:}
Don’t forget to uninstall the package before installing it with another version.
\end{sphinxadmonition}
\end{quote}



\subsection{Assembly}
\label{\detokenize{sdam:assembly}}\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{sdam:id4}}Todo:}
Package assembly workflow
\end{sphinxadmonition}
\end{quote}



\subsection{Making Documentation}
\label{\detokenize{sdam:making-documentation}}\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{sdam:id5}}Todo:}
Making Documentation workflow
\end{sphinxadmonition}
\end{quote}



\subsection{News from \sphinxstyleliteralintitle{\sphinxupquote{sdam}} package}
\label{\detokenize{sdam:news-from-sdam-package}}\label{\detokenize{sdam:news}}\begin{itemize}
\item {} \begin{description}
\item[{\sphinxstylestrong{Version 0.3.0} (beta) released (21\sphinxhyphen{}11\sphinxhyphen{}2020).}] \leavevmode\begin{itemize}
\item {} 
\sphinxstyleemphasis{New functions} \sphinxcode{\sphinxupquote{plot.dates()}} and \sphinxcode{\sphinxupquote{prex()}} (cf. )

\item {} 
\sphinxcode{\sphinxupquote{rp}} dataset is added (\sphinxstylestrong{v0.3.7})

\end{itemize}
\begin{itemize}
\item {} 
Function \sphinxcode{\sphinxupquote{edhw()}} combines \sphinxcode{\sphinxupquote{"people"}} with other EDH variables

\end{itemize}
\begin{itemize}
\item {} 
Arguments \sphinxtitleref{select}, \sphinxtitleref{clean}, \sphinxtitleref{province}, \sphinxtitleref{gender}  added to \sphinxcode{\sphinxupquote{edhw()}}

\item {} 
Argument \sphinxtitleref{maxlimit}  added to \sphinxcode{\sphinxupquote{get.edh()}}

\item {} 
Argument \sphinxtitleref{authenticate} in  \sphinxcode{\sphinxupquote{request()}}  renamed to \sphinxtitleref{anonymous}

\end{itemize}

\end{description}

\end{itemize}

\begin{itemize}
\item {} \begin{description}
\item[{\sphinxstylestrong{Version 0.2.0} released (19\sphinxhyphen{}5\sphinxhyphen{}2020).}] \leavevmode\begin{itemize}
\item {} 
\sphinxstyleemphasis{New function} \sphinxcode{\sphinxupquote{edhw()}} to extract fragments of the \sphinxcode{\sphinxupquote{EDH}} dataset

\end{itemize}
\begin{itemize}
\item {} 
Documentation \sphinxhref{https://sdam-au.github.io/sdam/}{website} launched

\end{itemize}
\begin{itemize}
\item {} 
Arguments \sphinxtitleref{force}  and \sphinxtitleref{rm.file} added to \sphinxcode{\sphinxupquote{request()}}

\end{itemize}

\end{description}

\end{itemize}

\begin{itemize}
\item {} \begin{description}
\item[{\sphinxstylestrong{Version 0.1.0} released (6\sphinxhyphen{}5\sphinxhyphen{}2020).}] \leavevmode\begin{itemize}
\item {} 
\sphinxstyleemphasis{First functions} \sphinxcode{\sphinxupquote{get.edh()}}, \sphinxcode{\sphinxupquote{get.edhw()}}, \sphinxcode{\sphinxupquote{request()}}, \sphinxcode{\sphinxupquote{simil()}}, and \sphinxcode{\sphinxupquote{EDH}} \sphinxstyleemphasis{dataset}

\end{itemize}

\end{description}

\end{itemize}

\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{sdam:id6}}Todo:}
Connect with GitHub \sphinxcode{\sphinxupquote{sdam\sphinxhyphen{}au\textbackslash{}sdam\textbackslash{}docs}}
\end{sphinxadmonition}
\end{quote}



\section{DEiC’s sciencedata.dk}
\label{\detokenize{Sciencedata_dk:deic-s-sciencedata-dk}}\label{\detokenize{Sciencedata_dk:deic-sddk}}\label{\detokenize{Sciencedata_dk::doc}}
Accessing DEiC’s (Danish e\sphinxhyphen{}Infrastructure Cooperation) \sphinxhref{https:\textbackslash{}sciencedata.dk}{sciencedata.dk}
needs another tools, and this is basically achieved by performing a HTTP request as a \sphinxstylestrong{client}
to one of DEiC’s \sphinxstylestrong{server}.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
************
|  CLIENT  | \PYGZhy{}\PYGZhy{}\PYGZgt{}\PYGZhy{}\PYGZhy{}\PYGZgt{}  request  \PYGZhy{}\PYGZgt{}\PYGZhy{}\PYGZhy{}\PYGZgt{}\PYGZhy{}\PYGZhy{}\PYGZgt{}\PYGZhy{}\PYGZhy{}\PYGZgt{}\PYGZhy{}\PYGZhy{}\PYGZgt{}.
|  ======  |                                |
************                                .
     `                                      |
     \PYGZca{}                                 ************
     `\PYGZlt{}\PYGZhy{}\PYGZhy{}\PYGZlt{}\PYGZhy{}\PYGZhy{}\PYGZlt{}\PYGZhy{}\PYGZhy{}\PYGZlt{}\PYGZhy{}\PYGZhy{}\PYGZlt{}  response  \PYGZlt{}\PYGZhy{}\PYGZhy{} \PYGZlt{}\PYGZhy{}\PYGZhy{} |  SERVER  |
                                       |  ======  |
                                       ************
\end{sphinxVerbatim}
\end{quote}


The server’s response depends on the method used in the HTTP request.



\subsection{Accessing DEiC’s sciencedata.dk using R}
\label{\detokenize{Sciencedata_dk:accessing-deic-s-sciencedata-dk-using-r}}
Function \sphinxcode{\sphinxupquote{request()}}
from the \sphinxhref{https://sdam-au.github.io/sdam/}{R package “sdam”} is aimed to interact
with DEiC’s \sphinxhref{https://sciencedata.dk}{sciencedata.dk}

Note that this function requires the {[}R{]} package \sphinxcode{\sphinxupquote{"httr"}}.


\subsubsection{Functions Usage}
\label{\detokenize{Sciencedata_dk:functions-usage}}\index{request() (built\sphinxhyphen{}in function)@\spxentry{request()}\spxextra{built\sphinxhyphen{}in function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{Sciencedata_dk:request}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{request}}}{}{}
\end{fulllineitems}


\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} arguments supported (currently)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{request}\PYG{p}{(}\PYG{n}{file}
          \PYG{p}{,}\PYG{n}{URL}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{https://sciencedata.dk\PYGZdq{}}
          \PYG{p}{,}\PYG{n}{method}\PYG{o}{=}\PYG{n+nf}{c}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{GET\PYGZdq{}}\PYG{p}{,}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{POST\PYGZdq{}}\PYG{p}{,}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{PUT\PYGZdq{}}\PYG{p}{,}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{DELETE\PYGZdq{}}\PYG{p}{)}
          \PYG{p}{,}\PYG{n}{anonymous}\PYG{o}{=}\PYG{k+kc}{FALSE}
          \PYG{p}{,}\PYG{n}{path}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{/files\PYGZdq{}}
          \PYG{p}{,}\PYG{n}{cred}\PYG{o}{=}\PYG{k+kc}{NULL}
          \PYG{p}{,}\PYG{n}{subdomain}\PYG{o}{=}\PYG{k+kc}{NULL}
          \PYG{p}{,}\PYG{k+kc}{...}\PYG{p}{)}
\end{sphinxVerbatim}



\subsubsection{Parameters}
\label{\detokenize{Sciencedata_dk:parameters}}\begin{itemize}
\item {} 
\sphinxtitleref{file} (object under ‘method’)

\item {} 
\sphinxtitleref{URL} (protocol and domain of the url)

\item {} 
\sphinxtitleref{method} (the http “verb” for the object)
\begin{quote}

\sphinxcode{\sphinxupquote{"GET"}} (list)

\sphinxcode{\sphinxupquote{"POST"}} (place)

\sphinxcode{\sphinxupquote{"PUT"}} (update)

\sphinxcode{\sphinxupquote{"DELETE"}} (cancel)
\end{quote}

\item {} 
\sphinxtitleref{anonymous} (logical, unauthenticated user?)

\item {} 
\sphinxtitleref{path} (optional path or subdirectory to add to the url)

\end{itemize}



\subsubsection{Additional parameters}
\label{\detokenize{Sciencedata_dk:additional-parameters}}\begin{itemize}
\item {} 
\sphinxtitleref{cred} (authentication credentials, vector with username and password)

\item {} 
\sphinxtitleref{subdomain} (optional, add subdomain to the url)

\item {} 
\sphinxtitleref{…} (extra parameters if required)

\end{itemize}



\subsubsection{Arguments}
\label{\detokenize{Sciencedata_dk:arguments}}
Arguments of \sphinxcode{\sphinxupquote{request()}} are retrieved with the \sphinxcode{\sphinxupquote{formals()}} function.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{formals}\PYG{p}{(}\PYG{n}{request}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}file}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}URL}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZdq{}https://sciencedata.dk\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}method}
\PYG{c+c1}{\PYGZsh{}c(\PYGZdq{}GET\PYGZdq{}, \PYGZdq{}POST\PYGZdq{}, \PYGZdq{}PUT\PYGZdq{}, \PYGZdq{}DELETE\PYGZdq{})}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}anonymous}
\PYG{c+c1}{\PYGZsh{}[1] FALSE}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}cred}
\PYG{c+c1}{\PYGZsh{}NULL}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}path}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZdq{}/files\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}subdomain}
\PYG{c+c1}{\PYGZsh{}NULL}
\end{sphinxVerbatim}

\begin{quote}

\begin{sphinxadmonition}{note}{Note:}
Aliases for \sphinxcode{\sphinxupquote{request()}} are \sphinxcode{\sphinxupquote{sddk()}} and \sphinxcode{\sphinxupquote{SDDK()}}.
\end{sphinxadmonition}
\end{quote}



\subsubsection{Output}
\label{\detokenize{Sciencedata_dk:output}}
The output is the server’s response that depends on the method to be used in the request.

A \sphinxcode{\sphinxupquote{Response}} message is returned when the method is \sphinxcode{\sphinxupquote{PUT}} with the url and items
\sphinxcode{\sphinxupquote{Date}}, \sphinxcode{\sphinxupquote{Status}}, \sphinxcode{\sphinxupquote{Content\sphinxhyphen{}Type}}.



\subsubsection{Details}
\label{\detokenize{Sciencedata_dk:details}}
There are two types of folders in DEiC’s \sphinxhref{https:\textbackslash{}sciencedata.dk}{sciencedata.dk} that are \sphinxstyleemphasis{personal}
and \sphinxstyleemphasis{shared} folders and both requires authentication with credentials.

The \sphinxstyleemphasis{path} to the shared folders where the files are located must be specified with the \sphinxcode{\sphinxupquote{path}} argument.
However, for personal folders is the \sphinxcode{\sphinxupquote{file}} argument that includes the path information.

That is, an {[}R{]} code will be like

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} personal folders}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{request}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{path/file\PYGZdq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} shared folders}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{request}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{file\PYGZdq{}}\PYG{p}{,} \PYG{n}{path}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{/path\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

Many times, DEiC’s \sphinxhref{https:\textbackslash{}sciencedata.dk}{sciencedata.dk} places the data on a \sphinxstyleemphasis{subdomain}, and
for some request methods like \sphinxcode{\sphinxupquote{PUT}} it is needed to specify the subdomain as well.



\subsection{Authentification}
\label{\detokenize{Sciencedata_dk:authentification}}
In case that accessing the server requires basic authentification,
then package \sphinxcode{\sphinxupquote{"tcltk"}} may be needed as well to input the credentials with a widget prompt.
\sphinxcode{\sphinxupquote{request()}} has the \sphinxcode{\sphinxupquote{cred}} argument for performing a basic authentification.

In DEiC’s \sphinxhref{https:\textbackslash{}sciencedata.dk}{sciencedata.dk}, both personal and shared folders
need some sort of authentication. With the basic authentication, the credentials are given
\sphinxstyleemphasis{with the username and password used under your personal} ‘sciencedata.dk’ \sphinxstylestrong{settings}.
\begin{quote}

\begin{sphinxadmonition}{hint}{Hint:}\begin{quote}

It is possible to prevent the widget by recording this information in a vector object.
If you want to avoid a dialog box then save your credentials.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} save authentication credentials}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{mycred} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{c}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{YOUR\PYGZhy{}AUID@au.dk\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{YOURPASSWORD\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
\end{quote}

However, in many cases such as with public folders in \sphinxhref{https:\textbackslash{}sciencedata.dk}{sciencedata.dk}
authentification        is not needed and you can disable it by setting \sphinxtitleref{anonymous} to
\sphinxcode{\sphinxupquote{TRUE}}.
\end{sphinxadmonition}
\end{quote}



\subsection{Responses}
\label{\detokenize{Sciencedata_dk:responses}}
Server responses carry a code called \sphinxstyleemphasis{HTTP status code} where \sphinxcode{\sphinxupquote{2xx}} means \sphinxstylestrong{success},
and \sphinxcode{\sphinxupquote{4xx}} means \sphinxstylestrong{client error}. There is also a status code like \sphinxcode{\sphinxupquote{5xx}} for server
error, and \sphinxcode{\sphinxupquote{3xx}} for redirection (and where codes \sphinxcode{\sphinxupquote{1xx}} are just informative).
\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{Sciencedata_dk:id5}}Todo:}
Typical staus codes in the response are \sphinxcode{\sphinxupquote{404}}, \sphinxcode{\sphinxupquote{201}}, \sphinxcode{\sphinxupquote{307}}…
\end{sphinxadmonition}
\end{quote}

When using the \sphinxcode{\sphinxupquote{request()}} function, the HTTP status code is given under \sphinxcode{\sphinxupquote{Status}} in the
response message below the time stamp.



\subsection{Examples}
\label{\detokenize{Sciencedata_dk:examples}}
Some examples of HTTP requests are given next where reponse messages in some cases are given
afterwards, and recall that \sphinxcode{\sphinxupquote{request()}} requires the \sphinxcode{\sphinxupquote{httr}} package.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} load required package}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{require}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{httr\PYGZdq{}}\PYG{p}{)}  \PYG{c+c1}{\PYGZsh{} https://cran.r\PYGZhy{}project.org/package=httr}
\end{sphinxVerbatim}



\subsubsection{Method GET}
\label{\detokenize{Sciencedata_dk:method-get}}
This method is for accessing the files with the data.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} for personal data (in case you have this file)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{request}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{df.json\PYGZdq{}}\PYG{p}{,} \PYG{n}{cred}\PYG{o}{=}\PYG{n}{mycred}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{}[1] \PYGZob{}\PYGZdq{}a\PYGZdq{}:\PYGZob{}\PYGZdq{}0\PYGZdq{}:\PYGZdq{}a1\PYGZdq{},\PYGZdq{}1\PYGZdq{}:\PYGZdq{}a2\PYGZdq{}\PYGZcb{},\PYGZdq{}b\PYGZdq{}:\PYGZob{}\PYGZdq{}0\PYGZdq{}:\PYGZdq{}b1\PYGZdq{},\PYGZdq{}1\PYGZdq{}:\PYGZdq{}b2\PYGZdq{}\PYGZcb{},\PYGZdq{}c\PYGZdq{}:\PYGZob{}\PYGZdq{}0\PYGZdq{}:\PYGZdq{}c1\PYGZdq{},\PYGZdq{}1\PYGZdq{}:\PYGZdq{}c2\PYGZdq{}\PYGZcb{}\PYGZcb{}}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} for shared folders (example Vojtech test folder), where both options work}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{request}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{df.json\PYGZdq{}}\PYG{p}{,} \PYG{n}{path}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{/sharingin/648597@au.dk/TEST\PYGZus{}shared\PYGZus{}folder/\PYGZdq{}}\PYG{p}{,} \PYG{n}{method}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{GET\PYGZdq{}}\PYG{p}{,} \PYG{n}{cred}\PYG{o}{=}\PYG{n}{mycred}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{}[1] \PYGZob{}\PYGZdq{}a\PYGZdq{}:\PYGZob{}\PYGZdq{}0\PYGZdq{}:\PYGZdq{}a1\PYGZdq{},\PYGZdq{}1\PYGZdq{}:\PYGZdq{}a2\PYGZdq{}\PYGZcb{},\PYGZdq{}b\PYGZdq{}:\PYGZob{}\PYGZdq{}0\PYGZdq{}:\PYGZdq{}b1\PYGZdq{},\PYGZdq{}1\PYGZdq{}:\PYGZdq{}b2\PYGZdq{}\PYGZcb{},\PYGZdq{}c\PYGZdq{}:\PYGZob{}\PYGZdq{}0\PYGZdq{}:\PYGZdq{}c1\PYGZdq{},\PYGZdq{}1\PYGZdq{}:\PYGZdq{}c2\PYGZdq{}\PYGZcb{}\PYGZcb{}}
\end{sphinxVerbatim}

\begin{quote}

\begin{sphinxadmonition}{note}{Note:}
If there is any error, then the HTTP status code with the \sphinxcode{\sphinxupquote{GET}} method
is \sphinxcode{\sphinxupquote{200}} or OK but it is not returned.
\end{sphinxadmonition}
\end{quote}



\subsubsection{Method PUT}
\label{\detokenize{Sciencedata_dk:method-put}}
The URL typically includes also a \sphinxstyleemphasis{subdomain} that for DEiC’s \sphinxhref{https://sciencedata.dk}{sciencedata.dk}
is named \sphinxcode{\sphinxupquote{silo}} followed by a number. For instance, my personal documents are located in \sphinxcode{\sphinxupquote{silo1.sciencedata.dk}},
and other users that will follow are probably located at \sphinxcode{\sphinxupquote{silo2}}, etc.


\paragraph{\sphinxstyleliteralintitle{\sphinxupquote{PUT}} in own folder}
\label{\detokenize{Sciencedata_dk:put-in-own-folder}}
For method \sphinxcode{\sphinxupquote{PUT}}, the subdomain is mandatory; otherwise the request is redirected.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} for personal data (in my case) I need to specify the subdomain; otherwise it gets redirected!}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{request}\PYG{p}{(}\PYG{n+nf}{system.file}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{CITATION\PYGZdq{}}\PYG{p}{)}\PYG{p}{,} \PYG{n}{method}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{PUT\PYGZdq{}}\PYG{p}{,} \PYG{n}{cred}\PYG{o}{=}\PYG{n}{mycred}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} Response [https://sciencedata.dk/files/CITATION]}
\PYG{c+c1}{\PYGZsh{}  Date: 2020\PYGZhy{}01\PYGZhy{}17 13:31}
\PYG{c+c1}{\PYGZsh{}  Status: 307}
\PYG{c+c1}{\PYGZsh{}  Content\PYGZhy{}Type: text/html; charset=UTF\PYGZhy{}8}
\PYG{c+c1}{\PYGZsh{}\PYGZlt{}EMPTY BODY\PYGZgt{}}
\end{sphinxVerbatim}

The HTTP status code \sphinxcode{\sphinxupquote{307}} means temporary redirect.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} my data is in subdomain \PYGZdq{}silo1\PYGZdq{}}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{request}\PYG{p}{(}\PYG{n+nf}{system.file}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{CITATION\PYGZdq{}}\PYG{p}{)}\PYG{p}{,} \PYG{n}{method}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{PUT\PYGZdq{}}\PYG{p}{,} \PYG{n}{cred}\PYG{o}{=}\PYG{n}{mycred}\PYG{p}{,} \PYG{n}{subdomain}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{silo1\PYGZdq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} Response [https://silo1.sciencedata.dk/files/CITATION]}
\PYG{c+c1}{\PYGZsh{}  Date: 2020\PYGZhy{}01\PYGZhy{}17 13:31}
\PYG{c+c1}{\PYGZsh{}  Status: 201}
\PYG{c+c1}{\PYGZsh{}  Content\PYGZhy{}Type: text/html; charset=UTF\PYGZhy{}8}
\PYG{c+c1}{\PYGZsh{}\PYGZlt{}EMPTY BODY\PYGZgt{}}
\end{sphinxVerbatim}

The HTTP status code \sphinxcode{\sphinxupquote{201}} means that the file was created in the server side.


\paragraph{\sphinxstyleliteralintitle{\sphinxupquote{PUT}} in a sharing folder}
\label{\detokenize{Sciencedata_dk:put-in-a-sharing-folder}}
\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} (example Vojtech test folder)}

\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{request}\PYG{p}{(}\PYG{n+nf}{system.file}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{CITATION\PYGZdq{}}\PYG{p}{)}\PYG{p}{,} \PYG{n}{path}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{sharingin/648597@au.dk/TEST\PYGZus{}shared\PYGZus{}folder\PYGZdq{}}\PYG{p}{,}
\PYG{o}{+}    \PYG{n}{method}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{PUT\PYGZdq{}}\PYG{p}{,} \PYG{n}{cred}\PYG{o}{=}\PYG{n}{mycred}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} Response [https://sciencedata.dk/sharingin/648597@au.dk/TEST\PYGZus{}shared\PYGZus{}folder/CITATION]}
\PYG{c+c1}{\PYGZsh{}  Date: 2020\PYGZhy{}01\PYGZhy{}17 13:34}
\PYG{c+c1}{\PYGZsh{}  Status: 307}
\PYG{c+c1}{\PYGZsh{}  Content\PYGZhy{}Type: text/html; charset=UTF\PYGZhy{}8}
\PYG{c+c1}{\PYGZsh{}\PYGZlt{}EMPTY BODY\PYGZgt{}}



\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{request}\PYG{p}{(}\PYG{n+nf}{system.file}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{CITATION\PYGZdq{}}\PYG{p}{)}\PYG{p}{,} \PYG{n}{path}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{sharingout/648597@au.dk/TEST\PYGZus{}shared\PYGZus{}folder\PYGZdq{}}\PYG{p}{,}
\PYG{o}{+}    \PYG{n}{method}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{PUT\PYGZdq{}}\PYG{p}{,} \PYG{n}{cred}\PYG{o}{=}\PYG{n}{mycred}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{}Response [https://sciencedata.dk/sharingout/648597\PYGZpc{}40au.dk/TEST\PYGZus{}shared\PYGZus{}folder//CITATION]}
\PYG{c+c1}{\PYGZsh{}  Date: 2020\PYGZhy{}02\PYGZhy{}10 09:32}
\PYG{c+c1}{\PYGZsh{}  Status: 201}
\PYG{c+c1}{\PYGZsh{}  Content\PYGZhy{}Type: text/html; charset=UTF\PYGZhy{}8}
\PYG{c+c1}{\PYGZsh{}\PYGZlt{}EMPTY BODY\PYGZgt{}}
\end{sphinxVerbatim}

Hence, the \sphinxcode{\sphinxupquote{PUT}} method for a shared folder needs \sphinxcode{\sphinxupquote{\textquotesingle{}sharingout\textquotesingle{}}} in the path;
otherwise it gets redirected.
\begin{quote}

\begin{sphinxadmonition}{note}{Note:}
In some cases, the metacharacter \sphinxcode{\sphinxupquote{@}} in the path is “escaped” as \sphinxcode{\sphinxupquote{\%40}}.
\end{sphinxadmonition}
\end{quote}



\subsubsection{Method DELETE}
\label{\detokenize{Sciencedata_dk:method-delete}}
In the case of accesing with a request using methods \sphinxcode{\sphinxupquote{GET}} or \sphinxcode{\sphinxupquote{PUT}},
the path in the url is followed by \sphinxcode{\sphinxupquote{sharingin/USERID/FOLDERNAME}},
and for \sphinxcode{\sphinxupquote{DELETE}} the \sphinxstyleemphasis{response} is given with \sphinxcode{\sphinxupquote{sharingout}} in the path.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} for personal folder}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{request}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{df.json\PYGZdq{}}\PYG{p}{,} \PYG{n}{method}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{DELETE\PYGZdq{}}\PYG{p}{,} \PYG{n}{cred}\PYG{o}{=}\PYG{n}{mycred}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} In my case, this is in}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZdq{}https://silo1.sciencedata.dk/files/df.json\PYGZdq{}}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} for shared folders (example Vojtech test folder)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{request}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{CITATION\PYGZdq{}}\PYG{p}{,} \PYG{n}{path}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{/sharingin/648597@au.dk/TEST\PYGZus{}shared\PYGZus{}folder/\PYGZdq{}}\PYG{p}{,} \PYG{n}{method}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{DELETE\PYGZdq{}}\PYG{p}{,} \PYG{n}{cred}\PYG{o}{=}\PYG{n}{mycred}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{}[[1]]}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZdq{}https://sciencedata.dk/sharingout/648597\PYGZpc{}40au.dk/TEST\PYGZus{}shared\PYGZus{}folder/CITATION\PYGZdq{}}
\end{sphinxVerbatim}



\subsubsection{Method POST}
\label{\detokenize{Sciencedata_dk:method-post}}
Finally, there is also the possibility to \sphinxstyleemphasis{place} files with the \sphinxcode{\sphinxupquote{POST}} method along with extra
information.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{request}\PYG{p}{(}\PYG{n}{FILE}\PYG{p}{,} \PYG{n}{URL}\PYG{p}{,} \PYG{n}{method}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{POST\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

Typically with a \sphinxcode{\sphinxupquote{path}} argument and \sphinxcode{\sphinxupquote{subdomain}} if required.
\begin{quote}

\begin{sphinxadmonition}{note}{Note:}
Method \sphinxcode{\sphinxupquote{POST}} is not yet implemented in \sphinxhref{https://sciencedata.dk}{sciencedata.dk}
\end{sphinxadmonition}
\end{quote}



\section{Epigraphic Database Heidelberg}
\label{\detokenize{Epigraphic:epigraphic-database-heidelberg}}\label{\detokenize{Epigraphic:edh}}\label{\detokenize{Epigraphic::doc}}
This post is about accessing the “Epigraphic Database Heidelberg” (EDH),
which is one of the longest running database projects in digital Latin
epigraphy. The {[}EDH{]} database started as early as year 1986, and in 1997 the Epigraphic
Database Heidelberg website was launched at
\sphinxurl{https:/edh-www.adw.uni-heidelberg.de} where inscriptions, images,
bibliographic and geographic records can be searched and browsed online.


\subsection{Open Data Repository}
\label{\detokenize{Epigraphic:open-data-repository}}
Despite the possibility of accessing the {[}EDH{]} database through a Web browser, it is
many times convenient to get the Open Data Repository by the
{[}EDH{]} through its
public Application Programming Interface (API).

For inscriptions, the generic search pattern Uniform Resource Identifier
(URI) is:

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
https://edh\PYGZhy{}www.adw.uni\PYGZhy{}heidelberg.de/data/api/inscriptions/search?par\PYGZus{}1=value\PYGZam{}par\PYGZus{}2=value\PYGZam{}par\PYGZus{}n=value
\end{sphinxVerbatim}

with parameters \sphinxtitleref{par} \(1,2,...n\).



\subsection{Response}
\label{\detokenize{Epigraphic:response}}
The response from a query is in a Java Script Object Notation or JSON format such as:

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{p}{\PYGZob{}}
   \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{total}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+m+mi}{61}\PYG{p}{,}
   \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{limit}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
   \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{items}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.} \PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
(see {\hyperref[\detokenize{DDHH:json-str}]{\sphinxcrossref{\DUrole{std,std-ref}{“JSON structure” in Digital Humanities}}}})

\end{itemize}

In this case, \sphinxcode{\sphinxupquote{"items"}} has an array as a value where the returned records are located. The \sphinxcode{\sphinxupquote{"total"}}
and \sphinxcode{\sphinxupquote{"limit"}} values correspond to the \sphinxstyleemphasis{total} number of records of the query, and the \sphinxstyleemphasis{limit} number is
the amount of records to appear in the browser after the query.



\subsection{Accessing the EDH database using R}
\label{\detokenize{Epigraphic:accessing-the-edh-database-using-r}}
Accessing the {[}EDH{]} database {[}API{]} using \sphinxcode{\sphinxupquote{R}} is possible with a convenient function that produces
the generic search pattern {[}URI{]}. Hence, the function \sphinxcode{\sphinxupquote{get.edh()}} from the \sphinxcode{\sphinxupquote{sdam}} package allows
having access to the data with the available parameters that are recorded as arguments. Then the
returned {[}JSON{]} file is converted into a list data object with function \sphinxcode{\sphinxupquote{fromJSON()}} from the
\sphinxcode{\sphinxupquote{rjson}} package.

Currently, function \sphinxcode{\sphinxupquote{get.edh()}} allows getting data with the \sphinxcode{\sphinxupquote{search}} parameter
either from \sphinxcode{\sphinxupquote{"inscriptions"}} (the default option) or else from \sphinxcode{\sphinxupquote{"geography"}}.
The other two search options from the {[}EDH{]} database {[}API{]}, which are \sphinxcode{\sphinxupquote{"photos"}}
and \sphinxcode{\sphinxupquote{"bibliography"}}, may be implemented in the future in this function.
\begin{itemize}
\item {} 
(see {\hyperref[\detokenize{sdam:sdam-pkg}]{\sphinxcrossref{\DUrole{std,std-ref}{R package “sdam”}}}})

\end{itemize}



\subsubsection{Function usage}
\label{\detokenize{Epigraphic:function-usage}}\index{get.edh() (built\sphinxhyphen{}in function)@\spxentry{get.edh()}\spxextra{built\sphinxhyphen{}in function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{Epigraphic:get.edh}}\pysiglinewithargsret{\sphinxcode{\sphinxupquote{get.}}\sphinxbfcode{\sphinxupquote{edh}}}{}{}
\end{fulllineitems}


\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} arguments supported}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{get.edh}\PYG{p}{(}\PYG{n}{search} \PYG{o}{=} \PYG{n+nf}{c}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{inscriptions\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{geography\PYGZdq{}}\PYG{p}{)}
          \PYG{p}{,} \PYG{n}{url} \PYG{o}{=} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{https://edh\PYGZhy{}www.adw.uni\PYGZhy{}heidelberg.de/data/api\PYGZdq{}}
          \PYG{p}{,} \PYG{n}{hd\PYGZus{}nr}\PYG{p}{,} \PYG{n}{province}\PYG{p}{,} \PYG{n}{country}\PYG{p}{,} \PYG{n}{findspot\PYGZus{}modern}
          \PYG{p}{,} \PYG{n}{findspot\PYGZus{}ancient}\PYG{p}{,} \PYG{n}{year\PYGZus{}not\PYGZus{}before}\PYG{p}{,} \PYG{n}{year\PYGZus{}not\PYGZus{}after}
          \PYG{p}{,} \PYG{n}{tm\PYGZus{}nr}\PYG{p}{,} \PYG{n}{transcription}\PYG{p}{,} \PYG{n}{type}\PYG{p}{,} \PYG{n}{bbox}\PYG{p}{,} \PYG{n}{findspot}\PYG{p}{,} \PYG{n}{pleiades\PYGZus{}id}
          \PYG{p}{,} \PYG{n}{geonames\PYGZus{}id}\PYG{p}{,} \PYG{n}{offset}\PYG{p}{,} \PYG{n}{limit}\PYG{p}{,} \PYG{n}{maxlimit}\PYG{o}{=}\PYG{l+m}{4000}\PYG{p}{,} \PYG{n}{addID}\PYG{p}{,} \PYG{n}{printQ}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{quote}

\begin{sphinxadmonition}{note}{Note:}
“\sphinxcode{\sphinxupquote{R\textgreater{}}}” at the beginning of the line means that the following code is
written in \sphinxcode{\sphinxupquote{R}}. Comments are preceded by “\sphinxcode{\sphinxupquote{\#}}”.
\end{sphinxadmonition}
\end{quote}



\subsubsection{Search parameters}
\label{\detokenize{Epigraphic:search-parameters}}
The following parameter description is from the \sphinxhref{https://edh-www.adw.uni-heidelberg.de/data/api}{{[}EDH{]} database {[}API{]}}


\paragraph{Inscriptions and Geography}
\label{\detokenize{Epigraphic:inscriptions-and-geography}}\begin{itemize}
\item {} 
\sphinxtitleref{province:}
\begin{quote}

get list of valid values at \sphinxhref{https://edh-www.adw.uni-heidelberg.de/data/api/terms/province}{province terms},
in the {[}EDH{]} database {[}API{]}, case insensitive
\end{quote}

\item {} 
\sphinxtitleref{country:}
\begin{quote}

get list of valid values at \sphinxhref{https://edh-www.adw.uni-heidelberg.de/data/api/terms/country}{country terms}
in the {[}EDH{]} database {[}API{]}, case insensitive
\end{quote}

\item {} 
\sphinxtitleref{findspot\_modern:}
\begin{quote}

add leading and/or trailing truncation by asterisk *, e.g.
\sphinxcode{\sphinxupquote{findspot\textbackslash{}\_modern=köln\textbackslash{}*}}, case insensitive
\end{quote}

\item {} 
\sphinxtitleref{findspot\_ancient:}
\begin{quote}

add leading and/or trailing truncation by asterisk *, e.g.
\sphinxcode{\sphinxupquote{findspot\textbackslash{}\_ancient=aquae\textbackslash{}*}}, case insensitive
\end{quote}

\item {} 
\sphinxtitleref{offset:}
\begin{quote}

clause to specify which row to start from retrieving data, integer
\end{quote}

\item {} 
\sphinxtitleref{limit:}
\begin{quote}

clause to limit the number of results, integer (by default includes all records)
\end{quote}

\item {} 
\sphinxtitleref{bbox:}
\begin{quote}

bounding box with the format \sphinxcode{\sphinxupquote{bbox=minLong, minLat, maxLong, maxLat}}.

The query example:
\end{quote}

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
https://edh\PYGZhy{}www.adw.uni\PYGZhy{}heidelberg.de/data/api/inscriptions/search?bbox=11,47,12,48
\end{sphinxVerbatim}

that in {[}R{]} is a vector character.
\begin{quote}

\begin{sphinxadmonition}{hint}{Hint:}
Just make sure to quote the arguments in \sphinxcode{\sphinxupquote{get.edh()}} for the different
parameters that are not integers. This means for example that the query
for the last parameter with the two search options is written as

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{get.edh}\PYG{p}{(}\PYG{n}{search}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{inscriptions\PYGZdq{}}\PYG{p}{,} \PYG{n}{bbox}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{11,47,12,48\PYGZdq{}}\PYG{p}{)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{get.edh}\PYG{p}{(}\PYG{n}{search}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{geography\PYGZdq{}}\PYG{p}{,} \PYG{n}{bbox}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{11,47,12,48\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
\end{sphinxadmonition}
\end{quote}



\paragraph{Inscriptions only}
\label{\detokenize{Epigraphic:inscriptions-only}}\begin{itemize}
\item {} 
\sphinxtitleref{hd\_nr:}
\begin{quote}

HD\sphinxhyphen{}No of inscription
\end{quote}

\item {} 
\sphinxtitleref{year\_not\_before:}
\begin{quote}

integer, BC years are negative integers
\end{quote}

\item {} 
\sphinxtitleref{year\_not\_after:}
\begin{quote}

integer, BC years are negative integers
\end{quote}

\item {} 
\sphinxtitleref{tm\_nr:}
\begin{quote}

Trismegistos database number (?)
\end{quote}

\item {} 
\sphinxtitleref{transcription:}
\begin{quote}

automatic leading and trailing truncation, brackets are ignored
\end{quote}

\item {} 
\sphinxtitleref{type:}
\begin{quote}

of inscription, get list of values at \sphinxhref{https://edh-www.adw.uni-heidelberg.de/data/api/terms/type}{terms type}
in the {[}EDH{]} database {[}API{]}, case insensitive
\end{quote}

\end{itemize}



\paragraph{Geography only}
\label{\detokenize{Epigraphic:geography-only}}\begin{itemize}
\item {} 
\sphinxtitleref{findspot:}
\begin{quote}
\begin{description}
\item[{level of village, street etc.; add leading and/or trailing}] \leavevmode
truncation by asterisk \sphinxcode{\sphinxupquote{\textbackslash{}*}}, e.g. \sphinxcode{\sphinxupquote{findspot\textbackslash{}\_modern=köln\textbackslash{}*}}, case
insensitive

\end{description}
\end{quote}

\item {} 
\sphinxtitleref{pleiades\_id:}
\begin{quote}

Pleiades identifier of a place; integer value
\end{quote}

\item {} 
\sphinxtitleref{geonames\_id:}
\begin{quote}

Geonames identifier of a place; integer value
\end{quote}

\end{itemize}



\paragraph{Extra parameters}
\label{\detokenize{Epigraphic:extra-parameters}}\begin{itemize}
\item {} 
\sphinxtitleref{maxlimit:}
\begin{quote}

Maximum limit of the query; integer, default 4000
\end{quote}

\item {} 
\sphinxtitleref{addID:}
\begin{quote}

Add identification to the output?
\end{quote}

\item {} 
\sphinxtitleref{printQ:}
\begin{quote}

Print also the query?
\end{quote}

\end{itemize}


The two functions we have seen so far, \sphinxcode{\sphinxupquote{get.edh()}} and \sphinxcode{\sphinxupquote{get.edhw()}},
are available in the {\hyperref[\detokenize{sdam:sdam-pkg}]{\sphinxcrossref{\DUrole{std,std-ref}{R package “sdam”}}}}.

\begin{quote}


\sphinxstrong{See also:}

\begin{itemize}
\item {} 
{\hyperref[\detokenize{sdam:sdam-inst}]{\sphinxcrossref{\DUrole{std,std-ref}{“sdam” package installation}}}}.

\end{itemize}


\end{quote}



\subsection{Examples}
\label{\detokenize{Epigraphic:examples}}
The examples are made with the \sphinxcode{\sphinxupquote{sdam}} \sphinxcode{\sphinxupquote{R}} package.

Since  the \sphinxcode{\sphinxupquote{get.edh()}} function needs to transform JSON output using \sphinxcode{\sphinxupquote{rjson::fromJSON()}},
you need to have this package installed as well.


Then, to run the examples you need to load the required libraries.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{library}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{sdam\PYGZdq{}}\PYG{p}{)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{require}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{rjson\PYGZdq{}}\PYG{p}{)}  \PYG{c+c1}{\PYGZsh{} https://cran.r\PYGZhy{}project.org/package=rjson}
\end{sphinxVerbatim}


The query

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{get.edh}\PYG{p}{(}\PYG{n}{findspot\PYGZus{}modern}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{madrid\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

returns this truncated output:

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}ID}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZdq{}041220\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}commentary}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZdq{} Verschollen. Mögliche Datierung: 99\PYGZhy{}100.\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}country}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZdq{}Spain\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}diplomatic\PYGZus{}text}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZdq{}[ ] / [ ] / [ ] / GER PO[ ]TIF / [ ] / [ ] / [ ] / [\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}...}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}findspot\PYGZus{}modern}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZdq{}Madrid\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}id}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZdq{}HD041220\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}language}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZdq{}Latin\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}...}
\PYG{c+c1}{\PYGZsh{}}
\end{sphinxVerbatim}

With \sphinxcode{\sphinxupquote{"inscriptions"}}, which is the default option of \sphinxcode{\sphinxupquote{get.edh()}} and of the wrapper
function \sphinxcode{\sphinxupquote{get.edhw()}}, the \sphinxcode{\sphinxupquote{id}} “component” of the output list has not a numeric
format. However, many times is convenient to have a numerical identifier in each record,
and function \sphinxcode{\sphinxupquote{get.edh()}} adds an \sphinxcode{\sphinxupquote{ID}} with a numerical format at the beginning of the list.

Having a numerical identifier is useful for plotting the results, for example, and an \sphinxcode{\sphinxupquote{ID}} is added
to the output by default. You can prevent such addition by disabling
argument \sphinxcode{\sphinxupquote{addID}} with \sphinxcode{\sphinxupquote{FALSE}}.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{get.edh}\PYG{p}{(}\PYG{n}{findspot\PYGZus{}modern}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{madrid\PYGZdq{}}\PYG{p}{,} \PYG{n}{addID}\PYG{o}{=}\PYG{k+kc}{FALSE}\PYG{p}{)}
\end{sphinxVerbatim}

Further extensions to the {[}EDH{]} database {[}API{]} may be added in the future, and this will be
handled with similar arguments in the \sphinxcode{\sphinxupquote{get.edh()}} function …



\subsection{Accessing Epigraphic Database Heidelberg: Inscriptions}
\label{\detokenize{Epigraphic:accessing-epigraphic-database-heidelberg-inscriptions}}\index{get.edhw() (built\sphinxhyphen{}in function)@\spxentry{get.edhw()}\spxextra{built\sphinxhyphen{}in function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{Epigraphic:get.edhw}}\pysiglinewithargsret{\sphinxcode{\sphinxupquote{get.}}\sphinxbfcode{\sphinxupquote{edhw}}}{}{}
\end{fulllineitems}


\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} to perform several queries}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{get.edhw}\PYG{p}{(}\PYG{n}{hd\PYGZus{}nr}\PYG{p}{,} \PYG{k+kc}{...}\PYG{p}{)}
\end{sphinxVerbatim}

To study temporary uncertainty, for example, we need to access to an epigraphic database like the Heidelberg.
The wrapper function \sphinxcode{\sphinxupquote{get.edhw()}} allows multiple queries by using the Heidelberg number \sphinxcode{\sphinxupquote{hd\_nr}}.

\sphinxcode{\sphinxupquote{get.edhw()}} is a wrapper function to perform several queries from the Epigraphic Database Heidelberg API using
identification numbers.
\begin{quote}

\begin{sphinxadmonition}{note}{Note:}
Currently, function \sphinxcode{\sphinxupquote{get.edhw()}} works only for inscriptions.
\end{sphinxadmonition}
\end{quote}


\index{EDH\sphinxhyphen{}dataset@\spxentry{EDH\sphinxhyphen{}dataset}}\ignorespaces 
\def\sphinxLiteralBlockLabel{\label{\detokenize{Epigraphic:index-0}}}
\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} get data API from EDH with a wrapper function}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{EDH} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{get.edhw}\PYG{p}{(}\PYG{n}{hd\PYGZus{}nr}\PYG{o}{=}\PYG{l+m}{1}\PYG{o}{:}\PYG{l+m}{83821}\PYG{p}{)}  \PYG{c+c1}{\PYGZsh{} (03\PYGZhy{}11\PYGZhy{}2020)}

\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{length}\PYG{p}{(}\PYG{n}{EDH}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}[1] 83821}

\PYG{c+c1}{\PYGZsh{} or load it from the package}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{data}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{EDH\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

This wrapper function basically perform the following loop that
will produce a list object with the existing entries for each inscription,
and where entries have different length.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} grab the data from EDH API and record it in \PYGZsq{}EDH\PYGZsq{}}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{EDH} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{list}\PYG{p}{(}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{} 82464 INSCRIPTIONS (20\PYGZhy{}11\PYGZhy{}2019)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{for}\PYG{p}{(}\PYG{n}{i} \PYG{n}{in} \PYG{n+nf}{seq\PYGZus{}len}\PYG{p}{(}\PYG{l+m}{82464}\PYG{p}{)}\PYG{p}{)} \PYG{p}{\PYGZob{}}
\PYG{o}{+}    \PYG{n}{EDH}\PYG{n}{[}\PYG{n+nf}{[length}\PYG{p}{(}\PYG{n}{EDH}\PYG{p}{)}\PYG{l+m}{+1L}\PYG{n}{]}\PYG{n}{]} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{try}\PYG{p}{(}\PYG{n+nf}{get.edh}\PYG{p}{(}\PYG{n}{hd\PYGZus{}nr}\PYG{o}{=}\PYG{n}{i}\PYG{p}{)}\PYG{p}{)}
\PYG{o}{+}    \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

Beware that retrieving such a large number of records will take a very long time,
and this can be done by parts and then collate the lists into the \sphinxcode{\sphinxupquote{EDH}} object.
\begin{quote}

\begin{sphinxadmonition}{note}{Note:}
Character \sphinxcode{\sphinxupquote{+}} in the code shows the scope of the loop.
\end{sphinxadmonition}
\end{quote}



\subsubsection{Output}
\label{\detokenize{Epigraphic:output}}
The output depends on each particular case.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{is}\PYG{p}{(}\PYG{n}{EDH}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZdq{}list\PYGZdq{}   \PYGZdq{}vector\PYGZdq{}}
\end{sphinxVerbatim}


The first record has 28 \sphinxtitleref{attribute} names

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} check variable names of first entry}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{attr}\PYG{p}{(}\PYG{n}{EDH}\PYG{n}{[}\PYG{n}{[1}\PYG{n}{]}\PYG{n}{]}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{names\PYGZdq{}}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{} [1] \PYGZdq{}ID\PYGZdq{}                     \PYGZdq{}commentary\PYGZdq{}             \PYGZdq{}country\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{} [4] \PYGZdq{}depth\PYGZdq{}                  \PYGZdq{}diplomatic\PYGZus{}text\PYGZdq{}        \PYGZdq{}edh\PYGZus{}geography\PYGZus{}uri\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{} [7] \PYGZdq{}findspot\PYGZus{}ancient\PYGZdq{}       \PYGZdq{}findspot\PYGZus{}modern\PYGZdq{}        \PYGZdq{}height\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[10] \PYGZdq{}id\PYGZdq{}                     \PYGZdq{}language\PYGZdq{}               \PYGZdq{}last\PYGZus{}update\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[13] \PYGZdq{}letter\PYGZus{}size\PYGZdq{}            \PYGZdq{}literature\PYGZdq{}             \PYGZdq{}material\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[16] \PYGZdq{}modern\PYGZus{}region\PYGZdq{}          \PYGZdq{}not\PYGZus{}after\PYGZdq{}              \PYGZdq{}not\PYGZus{}before\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[19] \PYGZdq{}people\PYGZdq{}                 \PYGZdq{}province\PYGZus{}label\PYGZdq{}         \PYGZdq{}responsible\PYGZus{}individual\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[22] \PYGZdq{}transcription\PYGZdq{}          \PYGZdq{}trismegistos\PYGZus{}uri\PYGZdq{}       \PYGZdq{}type\PYGZus{}of\PYGZus{}inscription\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[25] \PYGZdq{}type\PYGZus{}of\PYGZus{}monument\PYGZdq{}       \PYGZdq{}uri\PYGZdq{}                    \PYGZdq{}width\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[28] \PYGZdq{}work\PYGZus{}status\PYGZdq{}}
\end{sphinxVerbatim}


While record 21 has 34 items.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{attr}\PYG{p}{(}\PYG{n}{EDH}\PYG{n}{[}\PYG{n}{[21}\PYG{n}{]}\PYG{n}{]}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{names\PYGZdq{}}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{} [1] \PYGZdq{}ID\PYGZdq{}                            \PYGZdq{}commentary\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{} [3] \PYGZdq{}country\PYGZdq{}                       \PYGZdq{}depth\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{} [5] \PYGZdq{}diplomatic\PYGZus{}text\PYGZdq{}               \PYGZdq{}edh\PYGZus{}geography\PYGZus{}uri\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{} [7] \PYGZdq{}findspot\PYGZdq{}                      \PYGZdq{}findspot\PYGZus{}ancient\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{} [9] \PYGZdq{}findspot\PYGZus{}modern\PYGZdq{}               \PYGZdq{}geography\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[11] \PYGZdq{}height\PYGZdq{}                        \PYGZdq{}id\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[13] \PYGZdq{}language\PYGZdq{}                      \PYGZdq{}last\PYGZus{}update\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[15] \PYGZdq{}letter\PYGZus{}size\PYGZdq{}                   \PYGZdq{}literature\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[17] \PYGZdq{}material\PYGZdq{}                      \PYGZdq{}military\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[19] \PYGZdq{}modern\PYGZus{}region\PYGZdq{}                 \PYGZdq{}not\PYGZus{}after\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[21] \PYGZdq{}not\PYGZus{}before\PYGZdq{}                    \PYGZdq{}people\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[23] \PYGZdq{}present\PYGZus{}location\PYGZdq{}              \PYGZdq{}province\PYGZus{}label\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[25] \PYGZdq{}responsible\PYGZus{}individual\PYGZdq{}        \PYGZdq{}social\PYGZus{}economic\PYGZus{}legal\PYGZus{}history\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[27] \PYGZdq{}transcription\PYGZdq{}                 \PYGZdq{}trismegistos\PYGZus{}uri\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[29] \PYGZdq{}type\PYGZus{}of\PYGZus{}inscription\PYGZdq{}           \PYGZdq{}type\PYGZus{}of\PYGZus{}monument\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[31] \PYGZdq{}uri\PYGZdq{}                           \PYGZdq{}width\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[33] \PYGZdq{}work\PYGZus{}status\PYGZdq{}                   \PYGZdq{}year\PYGZus{}of\PYGZus{}find\PYGZdq{}}
\end{sphinxVerbatim}


Attribute \sphinxcode{\sphinxupquote{people}} is another list with other \sphinxtitleref{attribute} names

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{length}\PYG{p}{(}\PYG{n}{EDH}\PYG{n}{[}\PYG{n}{[1}\PYG{n}{]}\PYG{n}{]}\PYG{o}{\PYGZdl{}}\PYG{n}{people}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}[1] 3}

\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{attr}\PYG{p}{(}\PYG{n}{EDH}\PYG{n}{[}\PYG{n}{[1}\PYG{n}{]}\PYG{n}{]}\PYG{o}{\PYGZdl{}}\PYG{n}{people}\PYG{n}{[}\PYG{n}{[1}\PYG{n}{]}\PYG{n}{]}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{names\PYGZdq{}}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZdq{}name\PYGZdq{}      \PYGZdq{}gender\PYGZdq{}    \PYGZdq{}nomen\PYGZdq{}     \PYGZdq{}person\PYGZus{}id\PYGZdq{} \PYGZdq{}cognomen\PYGZdq{}}

\PYG{k+kc}{...}

\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{attr}\PYG{p}{(}\PYG{n}{EDH}\PYG{n}{[}\PYG{n}{[1}\PYG{n}{]}\PYG{n}{]}\PYG{o}{\PYGZdl{}}\PYG{n}{people}\PYG{n}{[}\PYG{n}{[3}\PYG{n}{]}\PYG{n}{]}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{names\PYGZdq{}}\PYG{p}{)}
\PYG{n}{[1}\PYG{n}{]} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{cognomen\PYGZdq{}}  \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{praenomen\PYGZdq{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{person\PYGZus{}id\PYGZdq{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{gender\PYGZdq{}}    \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{name\PYGZdq{}}      \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{nomen\PYGZdq{}}
\end{sphinxVerbatim}

\begin{itemize}
\item {} 
(see {\hyperref[\detokenize{EDHVariables:edh-attr}]{\sphinxcrossref{\DUrole{std,std-ref}{attributes in EDH dataset}}}})

\end{itemize}



\section{Extracting \sphinxstyleliteralintitle{\sphinxupquote{EDH}} Variables}
\label{\detokenize{EDHVariables:extracting-edh-variables}}\label{\detokenize{EDHVariables:edh-vars}}\label{\detokenize{EDHVariables::doc}}


\subsection{EDH variables}
\label{\detokenize{EDHVariables:edh-variables}}\label{\detokenize{EDHVariables:edhw-fun}}
Another wrapper function, this time for the extraction of variables from the \sphinxcode{\sphinxupquote{EDH}} dataset is found in \sphinxcode{\sphinxupquote{edhw()}}.
Use \sphinxcode{\sphinxupquote{data("rp")}} for Roman provinces in \sphinxtitleref{province}.

\index{edhw() (built\sphinxhyphen{}in function)@\spxentry{edhw()}\spxextra{built\sphinxhyphen{}in function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{EDHVariables:edhw}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{edhw}}}{}{}
\end{fulllineitems}



\subsubsection{Function usage}
\label{\detokenize{EDHVariables:function-usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} accepted parameter arguments}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{edhw}\PYG{p}{(}\PYG{n}{vars}\PYG{p}{,} \PYG{n}{x} \PYG{o}{=} \PYG{k+kc}{NULL}\PYG{p}{,} \PYG{n}{as} \PYG{o}{=} \PYG{n+nf}{c}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{list\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{df\PYGZdq{}}\PYG{p}{)}\PYG{p}{,} \PYG{n}{type} \PYG{o}{=} \PYG{n+nf}{c}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{long\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{wide\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{narrow\PYGZdq{}}\PYG{p}{)}\PYG{p}{,}
        \PYG{n}{split}\PYG{p}{,} \PYG{n}{select}\PYG{p}{,} \PYG{n}{addID}\PYG{p}{,} \PYG{n}{limit}\PYG{p}{,} \PYG{n}{id}\PYG{p}{,} \PYG{n}{na.rm}\PYG{p}{,} \PYG{n}{clean}\PYG{p}{,} \PYG{n}{province}\PYG{p}{,} \PYG{n}{gender}\PYG{p}{,} \PYG{k+kc}{...}\PYG{p}{)}
\end{sphinxVerbatim}



\subsubsection{Parameters}
\label{\detokenize{EDHVariables:parameters}}
Formal arguments of \sphinxcode{\sphinxupquote{edhw()}} are:
\begin{itemize}
\item {} 
\sphinxtitleref{vars:}
\begin{quote}

Chosen variables from the \sphinxcode{\sphinxupquote{EDH}} dataset (vector)
\end{quote}

\item {} 
\sphinxtitleref{x:}
\begin{quote}

An optional list object name with fragments of the \sphinxcode{\sphinxupquote{EDH}} dataset
\end{quote}

\item {} 
\sphinxtitleref{as:}
\begin{quote}

Format to return the output. Currently either as a \sphinxcode{\sphinxupquote{"list"}} or a data frame \sphinxcode{\sphinxupquote{"df"}} object.
\end{quote}

\item {} 
\sphinxtitleref{type:}
\begin{quote}

Format of the data frame output. Currently  either a \sphinxcode{\sphinxupquote{"long"}} or a \sphinxcode{\sphinxupquote{"wide"}} table (option \sphinxcode{\sphinxupquote{"narrow"}} not yet implemented).
\end{quote}

\item {} \begin{description}
\item[{\sphinxtitleref{split:}}] \leavevmode
Divide the data into groups by \sphinxtitleref{id}? (logical and optional)

\end{description}

\item {} \begin{description}
\item[{\sphinxtitleref{select:}}] \leavevmode
\sphinxcode{\sphinxupquote{"people"}} variables to select (vector and optional, data frame \sphinxtitleref{type} \sphinxcode{\sphinxupquote{"long"}} only)

\end{description}

\item {} 
\sphinxtitleref{addID:}
\begin{quote}

Add identification to the output? (optional and logical)
\end{quote}

\item {} 
\sphinxtitleref{limit:}
\begin{quote}

Limit the returned output. Ignored if \sphinxtitleref{id} is specified (optional, integer or vector)
\end{quote}

\item {} 
\sphinxtitleref{id:}
\begin{quote}

Select only the \sphinxcode{\sphinxupquote{hd\_nr}} \sphinxtitleref{id(s)}  (optional, integer or character)
\end{quote}

\item {} 
\sphinxtitleref{na.rm:}
\begin{quote}

Remove entries with \sphinxcode{\sphinxupquote{\textless{}NA\textgreater{}}}? (logical and optional)
\end{quote}

\item {} 
\sphinxtitleref{clean:}
\begin{quote}

Replace entries with \sphinxcode{\sphinxupquote{\textless{}NA\textgreater{}}}? (logical and optional)
\end{quote}

\item {} 
\sphinxtitleref{province:}
\begin{quote}

Roman province (character, optional) as in \sphinxcode{\sphinxupquote{"rp"}} dataset.
\end{quote}

\item {} 
\sphinxtitleref{gender:}
\begin{quote}

People gender in \sphinxcode{\sphinxupquote{EDH}} (character, optional)
\end{quote}

\end{itemize}

\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{EDHVariables:id1}}Todo:}
Implement the \sphinxcode{\sphinxupquote{"narrow"}} \sphinxtitleref{type} option to \sphinxcode{\sphinxupquote{edhw()}}.
\end{sphinxadmonition}
\end{quote}



\subsection{Attributes in \sphinxstyleliteralintitle{\sphinxupquote{EDH}} dataset}
\label{\detokenize{EDHVariables:attributes-in-edh-dataset}}\label{\detokenize{EDHVariables:edh-attr}}
The aim of the \sphinxcode{\sphinxupquote{edhw()}} function is to extract attributes or variables of inscriptions. These inscriptions are output values
typically produced by the \sphinxcode{\sphinxupquote{get.edh()}} or \sphinxcode{\sphinxupquote{get.edhw()}} functions.

The records in the \sphinxcode{\sphinxupquote{EDH}} dataset have at least one the following items:


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|T|}
\hline

\sphinxcode{\sphinxupquote{"commentary"}}
\sphinxcode{\sphinxupquote{"fotos"}}
\sphinxcode{\sphinxupquote{"country"}}
\sphinxcode{\sphinxupquote{"depth"}}

\sphinxcode{\sphinxupquote{"diplomatic\_text"}}
\sphinxcode{\sphinxupquote{"edh\_geography\_uri"}}
\sphinxcode{\sphinxupquote{"findspot"}}
\sphinxcode{\sphinxupquote{"findspot\_ancient"}}
\sphinxcode{\sphinxupquote{"findspot\_modern"}}
&
\sphinxcode{\sphinxupquote{"geography"}}
\sphinxcode{\sphinxupquote{"height"}}
\sphinxcode{\sphinxupquote{"id"}}
\sphinxcode{\sphinxupquote{"language"}}
\sphinxcode{\sphinxupquote{"last\_update"}}
\sphinxcode{\sphinxupquote{"letter\_size"}}
\sphinxcode{\sphinxupquote{"literature"}}

\sphinxcode{\sphinxupquote{"material"}}
\sphinxcode{\sphinxupquote{"military"}}
\sphinxcode{\sphinxupquote{"modern\_region"}}
\sphinxcode{\sphinxupquote{"not\_after"}}
\sphinxcode{\sphinxupquote{"not\_before"}}
\sphinxcode{\sphinxupquote{"present\_location"}}
&
\sphinxcode{\sphinxupquote{"religion"}}
\sphinxcode{\sphinxupquote{"province\_label"}}
\sphinxcode{\sphinxupquote{"responsible\_individual"}}
\sphinxcode{\sphinxupquote{"social\_economic\_legal\_history"}}

\sphinxcode{\sphinxupquote{"transcription"}}
\sphinxcode{\sphinxupquote{"trismegistos\_uri"}}
\sphinxcode{\sphinxupquote{"type\_of\_inscription"}}
\sphinxcode{\sphinxupquote{"type\_of\_monument"}}
\sphinxcode{\sphinxupquote{"uri"}}

\sphinxcode{\sphinxupquote{"width"}}
\sphinxcode{\sphinxupquote{"work\_status"}}
\sphinxcode{\sphinxupquote{"year\_of\_find"}}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


Another output variable is \sphinxcode{\sphinxupquote{"people"}} that is a list of persons named in the inscriptions with at least the following
items


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline

\sphinxcode{\sphinxupquote{"person\_id"}}
\sphinxcode{\sphinxupquote{"nomen"}}
\sphinxcode{\sphinxupquote{"cognomen"}}
\sphinxcode{\sphinxupquote{"praenomen"}}
\sphinxcode{\sphinxupquote{"name"}}
\sphinxcode{\sphinxupquote{"gender"}}
\sphinxcode{\sphinxupquote{"status"}}
\sphinxcode{\sphinxupquote{"tribus"}}
&
\sphinxcode{\sphinxupquote{"origo"}}
\sphinxcode{\sphinxupquote{"occupation"}}
\sphinxcode{\sphinxupquote{"age: years"}}
\sphinxcode{\sphinxupquote{"age: months"}}
\sphinxcode{\sphinxupquote{"age: days"}}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}



\subsection{Example: Relative dating in EDH}
\label{\detokenize{EDHVariables:example-relative-dating-in-edh}}\label{\detokenize{EDHVariables:rel-dat}}
We are going to apply the \sphinxcode{\sphinxupquote{edhw()}} function to check the relative dating of Roman inscriptions, and
for a simple relative dating analysis, we choose chronological data variables in \sphinxcode{\sphinxupquote{vars}}:

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} make a list for relative variables in \PYGZsq{}EDH\PYGZsq{} (default)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{edhw}\PYG{p}{(}\PYG{n}{vars}\PYG{o}{=}\PYG{n+nf}{c}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}after\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}before\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

In this case, the boundaries of the time span of existence TPQ and TAQ are variables \sphinxcode{\sphinxupquote{"not\_after"}} and \sphinxcode{\sphinxupquote{"not\_before"}},
respectively.
\begin{itemize}
\item {} 
(see {\hyperref[\detokenize{Uncertainty:tapq}]{\sphinxcrossref{\DUrole{std,std-ref}{Boundaries of existence}}}} for the meaning of TAQ and TPQ.)

\end{itemize}


Since argument \sphinxstyleemphasis{x} is not specified in the function, the “EDH” dataset in the \sphinxcode{\sphinxupquote{sdam}} package is taken if available
with a \sphinxstyleemphasis{Warning} message.

\phantomsection\label{\detokenize{EDHVariables:recursively-apply}}\begin{quote}

\begin{sphinxadmonition}{hint}{Hint:}
The above use of function \sphinxcode{\sphinxupquote{edhw()}} is wrapping the \sphinxcode{\sphinxupquote{base}} \sphinxcode{\sphinxupquote{lapply}} function as

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} recursively apply a function over the list for  variables}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{lapply}\PYG{p}{(}\PYG{n}{EDH}\PYG{p}{,} \PYG{n}{`[`}\PYG{p}{,} \PYG{n+nf}{c}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}after\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}before\PYGZdq{}}\PYG{p}{)} \PYG{p}{)}
\end{sphinxVerbatim}

where a pair of backquotes (aka “backticks”) is a way to refer in \sphinxcode{\sphinxupquote{R}} to names or combinations
of symbols that are otherwise reserved or illegal, or non\sphinxhyphen{}syntactic names.
Hence, e.g. \sphinxcode{\sphinxupquote{apply(foo, \textasciigrave{}{[}\textasciigrave{}, c(...) )}} is the same as \sphinxcode{\sphinxupquote{apply(foo, function (x) x{[}c(...){]})}}.
\end{sphinxadmonition}
\end{quote}


The structure of such chronological data items is a list object with an \sphinxcode{\sphinxupquote{id}} for all entries that is the \sphinxcode{\sphinxupquote{EDH}} \sphinxcode{\sphinxupquote{hd\_nr}}.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{str}\PYG{p}{(}\PYG{n+nf}{edhw}\PYG{p}{(}\PYG{n}{vars}\PYG{o}{=}\PYG{n+nf}{c}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}after\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}before\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}List of 83821}
\PYG{c+c1}{\PYGZsh{} \PYGZdl{} :List of 3}
\PYG{c+c1}{\PYGZsh{}  ..\PYGZdl{} id        : chr \PYGZdq{}HD000001\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}  ..\PYGZdl{} not\PYGZus{}after : chr \PYGZdq{}0130\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}  ..\PYGZdl{} not\PYGZus{}before: chr \PYGZdq{}0071\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{} \PYGZdl{} :List of 3}
\PYG{c+c1}{\PYGZsh{}  ..\PYGZdl{} id        : chr \PYGZdq{}HD000002\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}  ..\PYGZdl{} not\PYGZus{}after : chr \PYGZdq{}0200\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}  ..\PYGZdl{} not\PYGZus{}before: chr \PYGZdq{}0051\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{} ...}
\end{sphinxVerbatim}
\end{quote}



\subsubsection{Complete cases}
\label{\detokenize{EDHVariables:complete-cases}}\label{\detokenize{EDHVariables:ccases}}
By default, function \sphinxcode{\sphinxupquote{edhw()}} do not remove missing data when present in all variables, but is possible to
remove missing information by activating the \sphinxstyleemphasis{na.rm} argument.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} remove missing data}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{str}\PYG{p}{(}\PYG{n+nf}{edhw}\PYG{p}{(}\PYG{n}{vars}\PYG{o}{=}\PYG{n+nf}{c}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}after\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}before\PYGZdq{}}\PYG{p}{)}\PYG{p}{,} \PYG{n}{na.rm}\PYG{o}{=}\PYG{k+kc}{TRUE}\PYG{p}{)}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}List of 60224}
\PYG{c+c1}{\PYGZsh{} \PYGZdl{} :List of 3}
\PYG{c+c1}{\PYGZsh{}  ..\PYGZdl{} id        : chr \PYGZdq{}HD000001\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}  ..\PYGZdl{} not\PYGZus{}after : chr \PYGZdq{}0130\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}  ..\PYGZdl{} not\PYGZus{}before: chr \PYGZdq{}0071\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{} \PYGZdl{} :List of 3}
\PYG{c+c1}{\PYGZsh{}  ..\PYGZdl{} id        : chr \PYGZdq{}HD000002\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}  ..\PYGZdl{} not\PYGZus{}after : chr \PYGZdq{}0200\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}  ..\PYGZdl{} not\PYGZus{}before: chr \PYGZdq{}0051\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{} ...}
\end{sphinxVerbatim}
\end{quote}

And work with complete cases.

\begin{quote}


\sphinxstrong{See also:}


{\hyperref[\detokenize{Uncertainty:missing}]{\sphinxcrossref{\DUrole{std,std-ref}{Missing data}}}} within uncertainty.


\end{quote}



\section{Time and dating}
\label{\detokenize{Time:time-and-dating}}\label{\detokenize{Time:time}}\label{\detokenize{Time::doc}}
Time is a (quantitative) continuous variable, but we often think \sphinxstyleemphasis{time} as a discrete variable
since is rounded when measured (e.g. a person is 40 years old and not between 40 and 41).



\subsection{Chronological periods of the Mediterranean Sea}
\label{\detokenize{Time:chronological-periods-of-the-mediterranean-sea}}
We use chronological periods for dating purposes.
Sometimes chronological periods are divided by phases and occasionally they are referred as chronological phases.


For example, \sphinxstyleemphasis{chronological phases} for dating ancient cultures of the Mediterranean Sea are



\begin{savenotes}\sphinxattablestart
\raggedright
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
Chronological phase
&\sphinxstyletheadfamily 
Absolute dates (approx.)
\\
\hline
Middle to Late Neolithic (MN\sphinxhyphen{}LN)
&
6000\sphinxhyphen{}4500 BC
\\
\hline
Final Neolithic to Early Bronze 1 (FN\sphinxhyphen{}EB1)
&
4500\sphinxhyphen{}2700 BC
\\
\hline
Early Bronze 2 (EB2)
&
2700\sphinxhyphen{}2200 BC
\\
\hline
Late Prepalatial (LPrepal)
&
2200\sphinxhyphen{}1900 BC
\\
\hline
First Palace (FPal)
&
1900\sphinxhyphen{}1700 BC
\\
\hline
Second Palace (SPal)
&
1700\sphinxhyphen{}1450 BC
\\
\hline
Third Palace (TPal)
&
1450\sphinxhyphen{}1200 BC
\\
\hline
Post\sphinxhyphen{}Palatial to Protogeometric (PPalPg)
&
1200\sphinxhyphen{}900 BC
\\
\hline
Geometric (Geo)
&
900\sphinxhyphen{}700 BC
\\
\hline
Archaic (Arch)
&
700\sphinxhyphen{}500 BC
\\
\hline
Classical (Class)
&
500\sphinxhyphen{}325 BC
\\
\hline
Hellenistic (Hell)
&
325 BC \sphinxhyphen{} AC 0
\\
\hline
Early Roman (ERom)
&
AC 0\sphinxhyphen{}200
\\
\hline
Middle Roman (MRom)
&
AC 200\sphinxhyphen{}350
\\
\hline
Late Roman (LRom)
&
AC 350\sphinxhyphen{}650
\\
\hline
Early Byzantine (EByz)
&
AC 650\sphinxhyphen{}900
\\
\hline
Middle Byzantine (MByz)
&
AC 900\sphinxhyphen{}1200
\\
\hline
Early Venetian (EVen)
&
AC 1200\sphinxhyphen{}1400
\\
\hline
Middle Venetian (MVen)
&
AC 1400\sphinxhyphen{}1600
\\
\hline
Late Venetian (LVen)
&
AC 1600\sphinxhyphen{}1800
\\
\hline
Recent (Recent)
&
AC 1800\sphinxhyphen{}present
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

(adapted from \sphinxstyleemphasis{Bevan et al}, 2013 (doi: 10.1111/j.1475\sphinxhyphen{}4754.2012.00674.x))


AC is sometimes ommited, and a negative number represents BC.



\subsection{Relative dating of Roman inscriptions}
\label{\detokenize{Time:relative-dating-of-roman-inscriptions}}\label{\detokenize{Time:edhrd}}
Since the range of time in the relative dating of Roman inscriptions without outliers is between 530 BC and 950 AC,
the chronological periods involving epigraphic Roman material are


\begin{savenotes}\sphinxattablestart
\raggedright
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
Period
&\sphinxstyletheadfamily 
Dates years
\\
\hline
\sphinxstyleemphasis{Archaic}  (Arch)
&
\sphinxhyphen{}700 to \sphinxhyphen{}500
\\
\hline
\sphinxstyleemphasis{Classical} (Class)
&
\sphinxhyphen{}500 to \sphinxhyphen{}325
\\
\hline
\sphinxstyleemphasis{Hellenistic}  (Hell)
&
\sphinxhyphen{}325 to 0
\\
\hline
\sphinxstyleemphasis{Early Roman}  (ERom)
&
0 to 200
\\
\hline
\sphinxstyleemphasis{Middle Roman}  (MRom)
&
200 to 350
\\
\hline
\sphinxstyleemphasis{Late Roman}  (LRom)
&
350 to 650
\\
\hline
\sphinxstyleemphasis{Early Byzantine} (EByz)
&
650 to 900
\\
\hline
\sphinxstyleemphasis{Middle Byzantine} (MByz)
&
900 to 1200
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


The eight chronological phases are reduced to five categories with their respective years:


\begin{savenotes}\sphinxattablestart
\raggedright
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
Period
&\sphinxstyletheadfamily 
Dates years
\\
\hline
\sphinxstyleemphasis{Archaic}  (Arch)
&
\sphinxhyphen{}700 to \sphinxhyphen{}500
\\
\hline
\sphinxstyleemphasis{Classical}  (Class)
&
\sphinxhyphen{}500 to \sphinxhyphen{}325
\\
\hline
\sphinxstyleemphasis{Hellenistic}  (Hell)
&
\sphinxhyphen{}325 to 0
\\
\hline
\sphinxstyleemphasis{Roman}  (Rom)
&
0 to 650
\\
\hline
\sphinxstyleemphasis{Byzantine}  (Byz)
&
650 to 1200
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

Eight\sphinxhyphen{} and five chronological phases are for the analysis of temporal uncertainty of the \sphinxcode{\sphinxupquote{EDH}} dataset.



\subsubsection{Dates in data frames}
\label{\detokenize{Time:dates-in-data-frames}}
To produce data frames, we need to make explicit with the \sphinxtitleref{as} argument; in the
example below with chronological data in the function where \sphinxcode{\sphinxupquote{"id"}} is added by default.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} produce a data frame with chronological data variables and remove missing data}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{EDHdates} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{edhw}\PYG{p}{(}\PYG{n}{vars}\PYG{o}{=}\PYG{n+nf}{c}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}after\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}before\PYGZdq{}}\PYG{p}{)}\PYG{p}{,} \PYG{n}{as}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{df\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}


The first entries are
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} look at the first ones}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{head}\PYG{p}{(}\PYG{n}{EDHdates}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}        id not\PYGZus{}before not\PYGZus{}after}
\PYG{c+c1}{\PYGZsh{}1 HD000001       0071      0130}
\PYG{c+c1}{\PYGZsh{}2 HD000002       0051      0200}
\PYG{c+c1}{\PYGZsh{}3 HD000003       0131      0170}
\PYG{c+c1}{\PYGZsh{}4 HD000004       0151      0200}
\PYG{c+c1}{\PYGZsh{}5 HD000005       0001      0200}
\PYG{c+c1}{\PYGZsh{}6 HD000006       0071      0150}
\end{sphinxVerbatim}
\end{quote}

and the last entries
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} look at the last ones}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{tail}\PYG{p}{(}\PYG{n}{EDHdates}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}            id not\PYGZus{}before not\PYGZus{}after}
\PYG{c+c1}{\PYGZsh{}83816 HD081504       0071      0130}
\PYG{c+c1}{\PYGZsh{}83817 HD081505       0071      0130}
\PYG{c+c1}{\PYGZsh{}83818 HD081506       0071      0130}
\PYG{c+c1}{\PYGZsh{}83819 HD081507       0101      0200}
\PYG{c+c1}{\PYGZsh{}83820 HD081508       0151      0230}
\PYG{c+c1}{\PYGZsh{}83821 HD081509       0151      0250}
\end{sphinxVerbatim}
\end{quote}



\subsubsection{Time spans of existence}
\label{\detokenize{Time:time-spans-of-existence}}\label{\detokenize{Time:tmsp}}
Object \sphinxcode{\sphinxupquote{EDHdates}} has information about relative dating with boundaries of existence
in variables \sphinxcode{\sphinxupquote{not\_before}} and \sphinxcode{\sphinxupquote{not\_after}}.

In \sphinxcode{\sphinxupquote{EDHdates}}, however, these variables are factors and they need to be converted into vectors
with a numeric format in order to represent the boundaries of existence.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} time columns in EDHdates are factors}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{is.factor}\PYG{p}{(}\PYG{n}{EDHdates}\PYG{o}{\PYGZdl{}}\PYG{n}{not\PYGZus{}after}\PYG{p}{)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{is.factor}\PYG{p}{(}\PYG{n}{EDHdates}\PYG{o}{\PYGZdl{}}\PYG{n}{not\PYGZus{}before}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}[1] TRUE}

\PYG{c+c1}{\PYGZsh{} boundaries of existence not\PYGZus{}before and not\PYGZus{}after}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{nb} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{as.numeric}\PYG{p}{(}\PYG{n+nf}{as.vector}\PYG{p}{(}\PYG{n}{EDHdates}\PYG{o}{\PYGZdl{}}\PYG{n}{not\PYGZus{}before}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{na} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{as.numeric}\PYG{p}{(}\PYG{n+nf}{as.vector}\PYG{p}{(}\PYG{n}{EDHdates}\PYG{o}{\PYGZdl{}}\PYG{n}{not\PYGZus{}after}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}
\end{quote}


To compute oldest and latest years with \sphinxcode{\sphinxupquote{min}} and \sphinxcode{\sphinxupquote{max}} functions, we also need to remove \sphinxcode{\sphinxupquote{NA}}
data from these vectors.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} oldest and latest dates}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{years} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{c}\PYG{p}{(}\PYG{n+nf}{min}\PYG{p}{(}\PYG{n}{nb}\PYG{p}{,} \PYG{n}{na.rm}\PYG{o}{=}\PYG{k+kc}{TRUE}\PYG{p}{)}\PYG{p}{,} \PYG{n+nf}{max}\PYG{p}{(}\PYG{n}{na}\PYG{p}{,} \PYG{n}{na.rm}\PYG{o}{=}\PYG{k+kc}{TRUE}\PYG{p}{)}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZhy{}530 1998}
\end{sphinxVerbatim}
\end{quote}

Dates in years are between 530 BC and 1998 AC.


\index{time intervals@\spxentry{time intervals}}\ignorespaces 

\subsubsection{Plotting time intervals}
\label{\detokenize{Time:plotting-time-intervals}}\label{\detokenize{Time:index-0}}
To be able to plot efficiently time spans of existence of records in the \sphinxcode{\sphinxupquote{EDH}} dataset, we
need to count with a numerical identifier.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} get IDs by removing alphabetic characters in id}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{ID} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{as.numeric}\PYG{p}{(}\PYG{n+nf}{sub}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{[[:alpha:]]+\PYGZdq{}}\PYG{p}{,}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZdq{}}\PYG{p}{,}\PYG{n}{EDHdates}\PYG{o}{\PYGZdl{}}\PYG{n}{id}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}
\end{quote}

A plot of relative dating for Roman inscriptions with \sphinxcode{\sphinxupquote{ID}} is made with the {[}R{]} \sphinxcode{\sphinxupquote{graphics}}
core package (or \sphinxcode{\sphinxupquote{base}} package with R version 4.0.0).
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} plot with graphics}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{plot}\PYG{p}{(}\PYG{n}{nb}\PYG{p}{,} \PYG{n}{ID}\PYG{p}{,} \PYG{n}{pch}\PYG{o}{=}\PYG{l+m}{20}\PYG{p}{,} \PYG{n}{col}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZsh{}C0C0C0\PYGZdq{}}\PYG{p}{,} \PYG{n}{xlab}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{Year\PYGZdq{}}\PYG{p}{,} \PYG{n}{ylab}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{ID\PYGZdq{}}\PYG{p}{,}
\PYG{o}{+}       \PYG{n}{xlim}\PYG{o}{=}\PYG{n}{years}\PYG{p}{,} \PYG{n}{main}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{EDH dataset time intervals\PYGZdq{}}\PYG{p}{)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{points}\PYG{p}{(}\PYG{n}{na}\PYG{p}{,} \PYG{n}{ID}\PYG{p}{,} \PYG{n}{pch}\PYG{o}{=}\PYG{l+m}{20}\PYG{p}{,} \PYG{n}{col}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZsh{}808080\PYGZdq{}}\PYG{p}{)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{segments}\PYG{p}{(}\PYG{n}{nb}\PYG{p}{,} \PYG{n}{ID}\PYG{p}{,} \PYG{n}{na}\PYG{p}{,} \PYG{n}{ID}\PYG{p}{,} \PYG{n}{col}\PYG{o}{=}\PYG{n}{grDevices}\PYG{o}{::}\PYG{n+nf}{adjustcolor}\PYG{p}{(}\PYG{l+m}{8}\PYG{p}{,}\PYG{n}{alpha}\PYG{o}{=}\PYG{l+m}{.25}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}
\end{quote}

or using the \sphinxcode{\sphinxupquote{plot.dates()}} function from \sphinxcode{\sphinxupquote{sdam}}
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{plot.dates}\PYG{p}{(}\PYG{n}{main}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{EDH dataset time intervals\PYGZdq{}}\PYG{p}{,}
\PYG{o}{+}             \PYG{n}{taq}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}before\PYGZdq{}}\PYG{p}{,} \PYG{n}{tpq}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}after\PYGZdq{}}\PYG{p}{,} \PYG{n}{cex}\PYG{o}{=}\PYG{l+m}{.5}\PYG{p}{)}
\end{sphinxVerbatim}
\end{quote}

That produces:


\noindent\sphinxincludegraphics[width=450\sphinxpxdimen]{{EDHdates}.png}



\subsubsection{Treating Outliers}
\label{\detokenize{Time:treating-outliers}}
By looking at the box\sphinxhyphen{}and\sphinxhyphen{}whisker plots below, we can clearly see a couple of outliers
at least in each category.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} par(mfrow =  c(2, 1))}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{boxplot}\PYG{p}{(}\PYG{n}{nb}\PYG{p}{,} \PYG{n}{horizontal}\PYG{o}{=}\PYG{k+kc}{TRUE}\PYG{p}{,} \PYG{n}{main}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{EDH \PYGZsq{}not\PYGZus{}before\PYGZsq{}\PYGZdq{}}\PYG{p}{)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{boxplot}\PYG{p}{(}\PYG{n}{na}\PYG{p}{,} \PYG{n}{horizontal}\PYG{o}{=}\PYG{k+kc}{TRUE}\PYG{p}{,} \PYG{n}{main}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{EDH \PYGZsq{}not\PYGZus{}after\PYGZsq{}\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
\end{quote}

That produces:


\noindent\sphinxincludegraphics[width=250\sphinxpxdimen]{{Box-and-whisker_EDHdates}.png}


The two most extreme outliers in each category are given in \sphinxcode{\sphinxupquote{\$out}} produced by the  \sphinxcode{\sphinxupquote{boxplot()}} function.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} first outlier is the maximum value of the dates}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{outliers}\PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{c}\PYG{p}{(}\PYG{n+nf}{tail}\PYG{p}{(}\PYG{n+nf}{sort}\PYG{p}{(}\PYG{n+nf}{boxplot}\PYG{p}{(}\PYG{n}{nb}\PYG{p}{,} \PYG{n}{plot}\PYG{o}{=}\PYG{k+kc}{FALSE}\PYG{p}{)}\PYG{o}{\PYGZdl{}}\PYG{n}{out}\PYG{p}{)}\PYG{p}{,}\PYG{l+m}{2}\PYG{p}{)}\PYG{p}{,}
\PYG{o}{+}               \PYG{n+nf}{tail}\PYG{p}{(}\PYG{n+nf}{sort}\PYG{p}{(}\PYG{n+nf}{boxplot}\PYG{p}{(}\PYG{n}{na}\PYG{p}{,} \PYG{n}{plot}\PYG{o}{=}\PYG{k+kc}{FALSE}\PYG{p}{)}\PYG{o}{\PYGZdl{}}\PYG{n}{out}\PYG{p}{)}\PYG{p}{,}\PYG{l+m}{2}\PYG{p}{)}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}[1] 1894 1997 1500 1998}
\end{sphinxVerbatim}
\end{quote}

We remove these outliers in \sphinxtitleref{not\_before} and \sphinxtitleref{not\_after}, and we update the \sphinxcode{\sphinxupquote{EDHdates}} object.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{c}\PYG{p}{(}\PYG{n}{nb}\PYG{n+nf}{[which}\PYG{p}{(}\PYG{n}{nb} \PYG{o}{\PYGZpc{}in\PYGZpc{}} \PYG{n}{outliers}\PYG{p}{)}\PYG{n}{]}\PYG{p}{,} \PYG{n}{na}\PYG{n+nf}{[which}\PYG{p}{(}\PYG{n}{na} \PYG{o}{\PYGZpc{}in\PYGZpc{}} \PYG{n}{outliers}\PYG{p}{)}\PYG{n}{]}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}[1] 1997 1894 1998 1500}

\PYG{c+c1}{\PYGZsh{} update by removing outliers in both categories}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{EDHdates} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n}{EDHdates}\PYG{n}{[}\PYG{o}{\PYGZhy{}}\PYG{n+nf}{c}\PYG{p}{(}\PYG{n+nf}{which}\PYG{p}{(}\PYG{n}{nb} \PYG{o}{\PYGZpc{}in\PYGZpc{}} \PYG{n}{outliers}\PYG{p}{)}\PYG{p}{,}\PYG{n+nf}{which}\PYG{p}{(}\PYG{n}{na} \PYG{o}{\PYGZpc{}in\PYGZpc{}} \PYG{n}{outliers}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{n}{]}
\end{sphinxVerbatim}
\end{quote}


Since rows are removed from \sphinxcode{\sphinxupquote{EDHdates}}, we need to update object identifiers to compute the
new the range of time.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} update values}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{ID} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{as.numeric}\PYG{p}{(}\PYG{n+nf}{sub}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{[[:alpha:]]+\PYGZdq{}}\PYG{p}{,}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZdq{}}\PYG{p}{,}\PYG{n}{EDHdates}\PYG{o}{\PYGZdl{}}\PYG{n}{id}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{nb} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{as.numeric}\PYG{p}{(}\PYG{n+nf}{as.vector}\PYG{p}{(}\PYG{n}{EDHdates}\PYG{o}{\PYGZdl{}}\PYG{n}{not\PYGZus{}before}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{na} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{as.numeric}\PYG{p}{(}\PYG{n+nf}{as.vector}\PYG{p}{(}\PYG{n}{EDHdates}\PYG{o}{\PYGZdl{}}\PYG{n}{not\PYGZus{}after}\PYG{p}{)}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} new dates}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{years} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{c}\PYG{p}{(}\PYG{n+nf}{min}\PYG{p}{(}\PYG{n}{nb}\PYG{p}{,} \PYG{n}{na.rm}\PYG{o}{=}\PYG{k+kc}{TRUE}\PYG{p}{)}\PYG{p}{,} \PYG{n+nf}{max}\PYG{p}{(}\PYG{n}{na}\PYG{p}{,} \PYG{n}{na.rm}\PYG{o}{=}\PYG{k+kc}{TRUE}\PYG{p}{)}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}[1] \PYGZhy{}530  950}
\end{sphinxVerbatim}
\end{quote}

Years are now between 530 BC and 950 AC. That is, from \sphinxstyleemphasis{Archaic} to \sphinxstyleemphasis{Middle Byzantine}
chronological periods.
\begin{itemize}
\item {} 
(See: {\hyperref[\detokenize{Time:time}]{\sphinxcrossref{\DUrole{std,std-ref}{Time and dating}}}})

\end{itemize}



\paragraph{Plotting without outliers}
\label{\detokenize{Time:plotting-without-outliers}}
Now we take a look at the box\sphinxhyphen{}and\sphinxhyphen{}whisker plots without outliers
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} par(mfrow =  c(2, 1))}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{boxplot}\PYG{p}{(}\PYG{n}{nb}\PYG{p}{,} \PYG{n}{horizontal}\PYG{o}{=}\PYG{k+kc}{TRUE}\PYG{p}{,} \PYG{n}{main}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{EDH \PYGZsq{}not\PYGZus{}before\PYGZsq{} (no outliers)\PYGZdq{}}\PYG{p}{)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{boxplot}\PYG{p}{(}\PYG{n}{na}\PYG{p}{,} \PYG{n}{horizontal}\PYG{o}{=}\PYG{k+kc}{TRUE}\PYG{p}{,} \PYG{n}{main}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{EDH \PYGZsq{}not\PYGZus{}after\PYGZsq{} (no outliers)\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
\end{quote}

that produces:


\noindent\sphinxincludegraphics[width=250\sphinxpxdimen]{{Box-and-whisker_EDHdates_no-outliers}.png}


The next step is to plot relative dating without outliers and with updated range of time
and with \sphinxcode{\sphinxupquote{plot.dates()}} function.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{plot.dates}\PYG{p}{(}\PYG{n}{main}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{EDH dataset time intervals (no outliers)\PYGZdq{}}\PYG{p}{,}
\PYG{o}{+}       \PYG{n}{taq}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}before\PYGZdq{}}\PYG{p}{,} \PYG{n}{tpq}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}after\PYGZdq{}}\PYG{p}{,} \PYG{n}{out}\PYG{o}{=}\PYG{l+m}{2}\PYG{p}{,} \PYG{n}{cex}\PYG{o}{=}\PYG{l+m}{.5}\PYG{p}{)}
\end{sphinxVerbatim}
\end{quote}

that produces a plot with no outliers:


\noindent\sphinxincludegraphics[width=450\sphinxpxdimen]{{EDHdatesNoOutliers}.png}

where we can see that most of the inscriptions in the \sphinxcode{\sphinxupquote{EDH}} dataset are from
Early to Middle Roman.




\subsection{Plotting time intervals}
\label{\detokenize{Time:id1}}
To plot time intervals, we use function \sphinxcode{\sphinxupquote{plot.dates()}}.
\index{plot.dates() (built\sphinxhyphen{}in function)@\spxentry{plot.dates()}\spxextra{built\sphinxhyphen{}in function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{Time:plot.dates}}\pysiglinewithargsret{\sphinxcode{\sphinxupquote{plot.}}\sphinxbfcode{\sphinxupquote{dates}}}{}{}
\end{fulllineitems}



\subsubsection{Function usage}
\label{\detokenize{Time:function-usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} use generic function}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{plot.dates}\PYG{p}{(}\PYG{n}{file}\PYG{o}{=}\PYG{k+kc}{NULL}\PYG{p}{,} \PYG{n}{x}\PYG{o}{=}\PYG{k+kc}{NULL}\PYG{p}{,} \PYG{n}{taq}\PYG{p}{,} \PYG{n}{tpq}\PYG{p}{,} \PYG{n}{out}\PYG{p}{,}
              \PYG{n}{main}\PYG{o}{=}\PYG{k+kc}{NULL}\PYG{p}{,} \PYG{n}{xlab}\PYG{o}{=}\PYG{k+kc}{NULL}\PYG{p}{,} \PYG{n}{ylab}\PYG{o}{=}\PYG{k+kc}{NULL}\PYG{p}{,} \PYG{n}{xlim}\PYG{o}{=}\PYG{k+kc}{NULL}\PYG{p}{,}
              \PYG{n}{pch}\PYG{p}{,} \PYG{n}{cex}\PYG{p}{,} \PYG{n}{col}\PYG{p}{,} \PYG{n}{lwd}\PYG{p}{,} \PYG{n}{lty}\PYG{p}{,} \PYG{n}{alpha}\PYG{p}{,} \PYG{k+kc}{...} \PYG{p}{)}
\end{sphinxVerbatim}



\subsubsection{Parameters}
\label{\detokenize{Time:parameters}}
Formal arguments of \sphinxcode{\sphinxupquote{plot.dates()}} are:
\begin{itemize}
\item {} 
\sphinxtitleref{x:}
\begin{quote}

data frame object of variables and observations. If \sphinxcode{\sphinxupquote{NULL}} then \sphinxcode{\sphinxupquote{EDH}} dataset is taken
\end{quote}

\item {} 
\sphinxtitleref{y:}
\begin{quote}

vector identifier (optional)
\end{quote}

\item {} 
\sphinxtitleref{file:}
\begin{quote}

path to file for a PDF format (optional)
\end{quote}

\item {} 
\sphinxtitleref{taq:}
\begin{quote}

TAQ or \sphinxstyleemphasis{terminus ante quem}
\end{quote}

\item {} 
\sphinxtitleref{tpq:}
\begin{quote}

TPQ or \sphinxstyleemphasis{terminus post quem}
\end{quote}

\item {} 
\sphinxtitleref{out:}
\begin{quote}

number of outliers to omit (integer or vector where first entry id for latest date)
\end{quote}

\end{itemize}


Optional arguments from the \sphinxcode{\sphinxupquote{graphics}} package for the plot are
\begin{itemize}
\item {} 
\sphinxtitleref{main:}
\begin{quote}

main tile
\end{quote}

\item {} 
\sphinxtitleref{xlab:}
\begin{quote}

\sphinxcode{\sphinxupquote{x}} label
\end{quote}

\item {} 
\sphinxtitleref{ylab:}
\begin{quote}

\sphinxcode{\sphinxupquote{y}} label
\end{quote}

\item {} 
\sphinxtitleref{xlim:}
\begin{quote}

\sphinxcode{\sphinxupquote{x}} limit
\end{quote}

\end{itemize}


And for the representation of time interval and boundaries of existence in the plot
\begin{itemize}
\item {} 
\sphinxtitleref{pch:}
\begin{quote}

symbol for \sphinxstyleemphasis{taq} and \sphinxstyleemphasis{tpq}
\end{quote}

\item {} 
\sphinxtitleref{cex:}
\begin{quote}

size of \sphinxtitleref{pch}
\end{quote}

\item {} 
\sphinxtitleref{col:}
\begin{quote}

colors of \sphinxtitleref{pch} and time interval segment
\end{quote}

\end{itemize}


for time interval segments:
\begin{itemize}
\item {} 
\sphinxtitleref{lwd:}
\begin{quote}

width
\end{quote}

\item {} 
\sphinxtitleref{lty:}
\begin{quote}

shape
\end{quote}

\item {} 
\sphinxtitleref{alpha:}
\begin{quote}

alpha color transparency
\end{quote}

\item {} 
\sphinxtitleref{…}
\begin{quote}

additional parameters if needed
\end{quote}

\end{itemize}

\begin{quote}


\sphinxstrong{See also:}


{\hyperref[\detokenize{Uncertainty:cprex}]{\sphinxcrossref{\DUrole{std,std-ref}{Computing the probability of existence}}}}


\end{quote}



\section{Temporal Uncertainty}
\label{\detokenize{Uncertainty:temporal-uncertainty}}\label{\detokenize{Uncertainty:uncertainty}}\label{\detokenize{Uncertainty::doc}}
\sphinxstyleemphasis{Temporal} is related to time, which is a (quantitative) continuous variable, while
\sphinxstyleemphasis{uncertainty} refers to situations involving unknown information.
\begin{itemize}
\item {} 
(see also {\hyperref[\detokenize{Time:time}]{\sphinxcrossref{\DUrole{std,std-ref}{Time and dating}}}})

\end{itemize}


Monte\sphinxhyphen{}Carlo simulation tests the significance of the observed fluctuations in the context
of uncertainty in the calibration curve and {[}archaeological{]} sampling.



\subsection{Probability and uncertainty}
\label{\detokenize{Uncertainty:probability-and-uncertainty}}
We can apply a probabilistic approach when dealing with uncertainty.
In this case, uncertainty is considered a measure quantifying the likelihood that events will occur.

Different approaches for assigning probabilities include:
\begin{itemize}
\item {} 
the proportion of a particular outcome to all possible outcomes (classical)

\item {} 
the long\sphinxhyphen{}run relative frequency of the probability for an outcome to occur

\item {} 
certain degree of belief (subjective)

\end{itemize}



\subsubsection{Probability space}
\label{\detokenize{Uncertainty:probability-space}}
A \sphinxstyleemphasis{probability space} defines an occurrence or event as a subset of that space.

For example, if the probability space is the interval \([0,1]\), with the {\hyperref[\detokenize{Uncertainty:unif}]{\sphinxcrossref{\DUrole{std,std-ref}{uniform distribution}}}} then the interval
\([ \frac{1}{3}, 1 ]\) is an event that represents a randomly chosen number between \(0\) and \(1\)
turning out to be at least \(\frac{1}{3}\).



\subsection{Probability distributions}
\label{\detokenize{Uncertainty:probability-distributions}}
A \sphinxstyleemphasis{probability distribution} describes the associated probability of possible outcomes for a random variable \(X\).

For a single variable, the data is allocated in univariate distributions, and we use multivariate distributions
to infer on multiple parameters.



\subsubsection{Binomial distribution}
\label{\detokenize{Uncertainty:binomial-distribution}}
A binomial distribution is a continuous distribution that describes a binomial experiment where
there are two possible outcomes.

The probability mass function (p.m.f.) corresponding to the binomial distribution
represents the probability of \(x\) successes in a binomial experiment

\(P(x) \;=\; {n\choose x}  ~p^x (1-p)^{n-x}\)

where \(P(x)\) is the  distribution function for the probability of success for \(x = 0, 1, 2, \dots, n\).



\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline

\noindent\sphinxincludegraphics[width=350\sphinxpxdimen]{{binomial}.png}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

A plot of the binomial distribution for \(n=30\) and with different \(p\) values.

\begin{quote}

\begin{sphinxadmonition}{note}{Note:}
The Bernoulli distribution is a special case of the binomial distribution
when \(n = 1\).
\end{sphinxadmonition}
\end{quote}



\subsubsection{Trapezoidal distribution}
\label{\detokenize{Uncertainty:trapezoidal-distribution}}\label{\detokenize{Uncertainty:trap}}
Trapezoidal distributions seems appropriate for modeling the duration and the form of a phenomenon with a growth\sphinxhyphen{}stage,
relative stability, and decline. These three parameters are not necessarily similar and an occurrence can have, for example,
a long development and abrupt decay.

The probability density function of the trapezoidal distribution for \(a \leqslant b \leqslant c \leqslant d\) is

\(f(x \mid a,b,c,d) = \begin{cases}U \bigl(\frac{x-a}{b-a}\bigr) \quad a \leqslant x < b\\U \qquad b \leqslant x < c\\U \bigl(\frac{d-x}{d-c}\bigr) \quad c \leqslant x < d\\ 0 \quad \text{elsewhere}\end{cases}\)

where \(U = 2(d + c - b - a)^{-1}\) corresponds to the uniform distribution.



\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline

\noindent\sphinxincludegraphics[width=400\sphinxpxdimen]{{trapezoidal1}.png}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

A trapezoidal distribution where decline is longer than growth.



\paragraph{Uniform distribution}
\label{\detokenize{Uncertainty:uniform-distribution}}\label{\detokenize{Uncertainty:unif}}
The uniform distribution is a special case of a trapezoidal distribution with a constant probability.

The probability density function of the continuous uniform distribution for \(a \leqslant x \leqslant b\)

\(f(x) \;=\; \frac{1}{b-a}\)

and \(f(x) = 0\) iff \(x<a\) or \(x>b\)



\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline

\noindent\sphinxincludegraphics[width=300\sphinxpxdimen]{{uniform45}.png}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

Uniform distribution plot for \(P(x_1 < X < x_2)\).

\begin{quote}

\begin{sphinxadmonition}{note}{Note:}
There is also a discrete version of the uniform distribution with a
mass probability function.
\end{sphinxadmonition}
\end{quote}



\subsubsection{Normal distribution}
\label{\detokenize{Uncertainty:normal-distribution}}
The normal distribution \textendash{}or “bell curve”\textendash{} is the probability distribution for a normal
random variable \(X \sim N (\mu,\sigma^2)\).
The normal distribution is also called \sphinxstyleemphasis{Gaussian} distribution due to C.F. Gauss who described
this distribution in mathematical terms.

The normal distribution is the most important distribution in statistics, and
play a crucial role in statistical inference.
This is partly because it approximates well the distributions of many types of variables.

The exact form of the distribution depends on the values of the mean \(\mu\) and
the standard deviation \(\sigma\) parameters.

The probability density function of a normal random variable \(-\infty < x < \infty\) is:

\(f(x) \;=\; \frac{1}{{\sigma \sqrt {2\pi } }}\;e^{{{ - \frac12 \left( \frac{x - \mu }{\sigma} \right)^2 }  }}\)

where \(e \approx 2.7183\) (Euler’s number), and \(\pi \approx 3.1416\) (Pi number).
\begin{quote}

\begin{sphinxadmonition}{note}{Note:}
A special case of the normal distribution with mean \(\mu = 0\) and
standard deviation \(\sigma = 1\) is the \sphinxstyleemphasis{standard normal distribution} \(Z\).
Any arbitrary normal distribution can be converted to \(Z\).
\end{sphinxadmonition}
\end{quote}



\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline

\noindent\sphinxincludegraphics[width=320\sphinxpxdimen]{{gaussiansds}.png}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

Normal distributions with different variances \(\sigma^2\) and same mean \(\mu\).



\subsection{Notation}
\label{\detokenize{Uncertainty:notation}}
To study temporal uncertainty, the following notation is adopted:


\(\varOmega =\) range of time

\(\tau =\) time span of existence

\(\Delta \tau =\) duration of \(\tau\)

\(t_i =\) a given portion of time

\(\Delta t_i =\) duration of \(t_i\)

\(\varphi =\) temporal resolution

\(e =\) event or occurrence

\(P, p =\) probability





\subsubsection{Boundaries of existence}
\label{\detokenize{Uncertainty:boundaries-of-existence}}\label{\detokenize{Uncertainty:tapq}}
Limits of dating for events are the earliest and the latest time the event may have happened.
These upper and lower bounds are termed
\begin{itemize}
\item {} 
\sphinxstyleemphasis{terminus ante quem} (TAQ) or “limit before which”

\item {} 
\sphinxstyleemphasis{terminus post quem} (TPQ) or “limit after which”

\end{itemize}



\subsection{Aoristic analysis}
\label{\detokenize{Uncertainty:aoristic-analysis}}\label{\detokenize{Uncertainty:aora}}
Aoristic analysis is based on the creation of a series of these artificial divisions of
the range of time with a fixed value, called time blocks, and the definition of their probability of existence.


\subsubsection{Temporal resolution}
\label{\detokenize{Uncertainty:temporal-resolution}}
Temporal resolution \(\varphi\) refers to the duration of time blocks, and
with aoristic analysis \(\varphi\) is fixed.


\subsubsection{Aoristic sum}
\label{\detokenize{Uncertainty:aoristic-sum}}
A proxy for evaluating change in the total counts of events across time is the \sphinxstyleemphasis{aoristic sum}, which is the sum of probabilities for each time block.

The aoristic sum is computed accross the sum of probabilities for events in a single portion of time \(t_i\).
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
    \PYG{n}{t1}  \PYG{n}{t2}  \PYG{n}{t3}
     \PYG{o}{\PYGZca{}}   \PYG{o}{\PYGZca{}}   \PYG{o}{\PYGZca{}}
\PYG{n}{a}    \PYG{o}{|}   \PYG{o}{|}   \PYG{o}{|}
\PYG{n}{b}    \PYG{o}{|}   \PYG{o}{|}   \PYG{o}{|}
\PYG{n}{c}    \PYG{o}{|}   \PYG{o}{|}   \PYG{o}{|}
     \PYG{o}{\PYGZca{}}   \PYG{o}{\PYGZca{}}   \PYG{o}{\PYGZca{}}
     \PYG{n}{aoristic}
       \PYG{n}{sums}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{\label{\detokenize{Uncertainty:id1}}Todo:}
Aoristic sum explained in R…
\end{sphinxadmonition}
\end{quote}



\subsection{Probability of existence \protect\(t_i\protect\)}
\label{\detokenize{Uncertainty:probability-of-existence-t-i}}
The probability of existence \(p[t_i]\) of an event \(e\) in a range of time \(\varOmega\) is the probabilty distribution

\(p[t_i] = \Delta t_i / \Delta \tau\)

where \(\tau\) is the time span of existence, \(\Delta\) is for the duration of a given portion of time \(t_i\) or of \(\tau\).

To compute \(p[t_i]\), Crema (2012, p. 447) takes the following example (years are BC):
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{l+m+mi}{350} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{300} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{250}
     \PYG{n}{t1}       \PYG{n}{t2}

     \PYG{l+m+mi}{342} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{288}
         \PYG{n}{tau}
\end{sphinxVerbatim}
\end{quote}

Hence, \(\Delta \tau\) in this case is \(54\).



To retrieve the minimum probability \(P[\varphi_\alpha]\) for the boundaries of the first and last time\sphinxhyphen{}blocks,
we define \(\varphi_\alpha = 1\) where

\(\phi_\alpha / \Delta_\tau = 1/54 = P[\phi_\alpha] = .018\) (approx)

Hence, the probability of existence for \(t_1\)

\(P[t_1] = P[\phi_\alpha] \cdot 42\)

(i.e. \(342 - 300\))

\(P[t_1] = .018 \cdot 42  =  .78\)

The probability of existence for for \(t_2\)

\(P[t_2] = P[\phi_\alpha] \cdot 12\)

(i.e. \(300 - 288\))

\(P[t_2] = .018 \cdot 12  =  .22\)

Etc.


\sphinxstyleemphasis{Assumption} (among others): Any equally long portion of time within the time span \(\tau\) has the same probability of existence.



\subsection{Probabilities of existence for time blocks}
\label{\detokenize{Uncertainty:probabilities-of-existence-for-time-blocks}}
The probability of existence for each time block (Appendix A, Crema, 2012)

\(P_b \;=\; {\sum_{i=0}^{\pi-1} \sum_{j=1}^{d/\varphi} \theta (i+j,\;b)} / {\pi}\)

where \(\pi\) is the number of all possible permutations,
and \(b\) is a numerical index of temporal blocks within \(\tau\).

On the other hand, the number of all possible permutations \(\pi\) equals \({(\Delta \tau - d)}/{\varphi + 1}\)
where \(d\) is the duration of \(e\).
\begin{quote}

\begin{sphinxadmonition}{note}{Note:}
\(d\) is rounded to the value of the temporal resolution, and \(b\) ranges
from \(1\) to \(\Delta t_i/\varphi\), which are the edges of the time span.
\end{sphinxadmonition}
\end{quote}


\subsubsection{Temporal resolution for time blocks}
\label{\detokenize{Uncertainty:temporal-resolution-for-time-blocks}}
The duration of time blocks that is \(\varphi\) in the denominator for computing
\(\pi\) is known as the \sphinxstyleemphasis{temporal resolution}, while the numerator expression for
the probability of existence for each time block is defined as

\(\theta (i+j,\;b) = \begin{cases}1 \quad \text{if}\; i+j = b  \\ 0 \quad \text{if}\; i+j \neq b \end{cases}\)



\subsubsection{Rate of change}
\label{\detokenize{Uncertainty:rate-of-change}}
Rate of change refers to transition probabilities like increase/stability/decrease as with the {\hyperref[\detokenize{Uncertainty:trap}]{\sphinxcrossref{\DUrole{std,std-ref}{trapezoidal}}}} distribution.

Rate of chage =  \(\frac{(e~t_{i+1} - e~t_i)}{\varphi}\)

An example of a transition probabilities are increase \(=0.4\); stability \(=0.5\) and decrease \(=0.1\)



\subsection{Imputation and Missing data}
\label{\detokenize{Uncertainty:imputation-and-missing-data}}\label{\detokenize{Uncertainty:missing}}
In statistics, \sphinxstyleemphasis{imputation} is the process of replacing missing data with plausible estimates.



\subsubsection{Missing data}
\label{\detokenize{Uncertainty:missing-data}}
Every data point has some likelihood of being missing, and Rubin (1976) classified missing data problems
into three categories: missing completely at random (MCAR), missing at random (MAR) and missing not at random (MNAR).

For some parameter \(\psi\), where \(Y_{obs}\) is the observed sample data and \(Y_{mis}\) the unobserved sample data,
the overall probability of being missing \(x\) depends,
\begin{itemize}
\item {} 
MCAR: only on some parameters \(\psi\)
\begin{quote}

\(P(x=0 \mid Y_{obs}, Y_{mis}, \psi) = P(x=0 \mid \psi)\)
\end{quote}

\item {} 
MAR: on observed information, including any design factors
\begin{quote}

\(P(x=0 \mid Y_{obs}, Y_{mis}, \psi) = P(x=0 \mid Y_{obs}, \psi)\)
\end{quote}

\item {} 
MNAR: also depends on unobserved information, including \(Y_{mis}\) itself
\begin{quote}

\(P(x=0 \mid Y_{obs}, Y_{mis}, \psi)\)
\end{quote}

\end{itemize}

\begin{quote}


\sphinxstrong{See also:}


{\hyperref[\detokenize{EDHVariables:ccases}]{\sphinxcrossref{\DUrole{std,std-ref}{Complete cases}}}}


\end{quote}



\subsection{Computing the probability of existence}
\label{\detokenize{Uncertainty:computing-the-probability-of-existence}}\label{\detokenize{Uncertainty:cprex}}
We use function \sphinxcode{\sphinxupquote{prex()}} to compute the probability of existence.

\index{prex() (built\sphinxhyphen{}in function)@\spxentry{prex()}\spxextra{built\sphinxhyphen{}in function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{Uncertainty:prex}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{prex}}}{}{}
\end{fulllineitems}



\subsubsection{Function usage}
\label{\detokenize{Uncertainty:function-usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} probability of existence}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{prex}\PYG{p}{(}\PYG{n}{x}\PYG{p}{,} \PYG{n}{taq}\PYG{p}{,} \PYG{n}{tpq}\PYG{p}{,} \PYG{n}{vars}\PYG{p}{,} \PYG{n}{bins} \PYG{o}{=} \PYG{k+kc}{NULL}\PYG{p}{,} \PYG{n}{cp}\PYG{p}{,} \PYG{n}{aoristic} \PYG{o}{=} \PYG{k+kc}{TRUE}\PYG{p}{,} \PYG{n}{weight} \PYG{o}{=} \PYG{l+m}{1}\PYG{p}{,}\PYG{p}{,}
        \PYG{n}{DF}\PYG{p}{,} \PYG{n}{out}\PYG{p}{,} \PYG{n}{plot} \PYG{o}{=} \PYG{k+kc}{FALSE}\PYG{p}{,} \PYG{n}{main} \PYG{o}{=} \PYG{k+kc}{NULL}\PYG{p}{,} \PYG{k+kc}{...}\PYG{p}{)}
\end{sphinxVerbatim}



\subsubsection{Parameters}
\label{\detokenize{Uncertainty:parameters}}\begin{itemize}
\item {} 
\sphinxtitleref{x:}
\begin{quote}

list or data frame object of variables and observations.
\end{quote}

\item {} 
\sphinxtitleref{taq:}
\begin{quote}

TAQ or \sphinxstyleemphasis{terminus ante quem}
\end{quote}

\item {} 
\sphinxtitleref{tpq:}
\begin{quote}

TPQ or \sphinxstyleemphasis{terminus post quem}
\end{quote}

\item {} 
\sphinxtitleref{vars:}
\begin{quote}

boundaries of existence in \sphinxcode{\sphinxupquote{x}} (vector for TAQ and TPQ)
\end{quote}

\item {} 
\sphinxtitleref{bins:}
\begin{quote}

length of the break (integer)
\end{quote}

\item {} 
\sphinxtitleref{cp:}
\begin{quote}

chronological phase (optional)
\end{quote}

\item {} 
\sphinxtitleref{aoristic:}
\begin{quote}

return aoristic sum? (logical)
\end{quote}

\item {} 
\sphinxtitleref{weight:}
\begin{quote}

weight to observations
\end{quote}

\item {} 
\sphinxtitleref{DF:}
\begin{quote}

return also data frame with observations? Ignored for plot (logical and optional)
\end{quote}

\item {} 
\sphinxtitleref{out:}
\begin{quote}

number of outliers to omit (integer or vector where first entry id for latest date)
\end{quote}

\item {} 
\sphinxtitleref{plot:}
\begin{quote}

plot the results? (logical and optional)
\end{quote}

\item {} 
\sphinxtitleref{main:}
\begin{quote}

plot’s main title (optional)
\end{quote}

\item {} 
\sphinxtitleref{…:}
\begin{quote}

additional optional parameters
\end{quote}

\end{itemize}



\paragraph{Details}
\label{\detokenize{Uncertainty:details}}
In case that \sphinxtitleref{bins} is \sphinxcode{\sphinxupquote{NULL}}, then the time breaks take the chronological period specified in \sphinxtitleref{cp}, which by
default is \sphinxcode{\sphinxupquote{"bin5"}} or five\sphinxhyphen{}periods for the \sphinxcode{\sphinxupquote{EDH}} dataset. Another built\sphinxhyphen{}in option is \sphinxcode{\sphinxupquote{"bin8"}} for eight
chronological periods, and \sphinxtitleref{cp} is open for other chronological phases as long as they are recorded as a list object.


For example, the (default) aoristic sum of \sphinxcode{\sphinxupquote{EDH}} inscriptions in the Roman province
of \sphinxcode{\sphinxupquote{Iudaea}} computed with \sphinxcode{\sphinxupquote{prex()}}
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} get inscriptions from Iudaea in EDH data base}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{iud} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{get.edh}\PYG{p}{(}\PYG{n}{search}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{inscriptions\PYGZdq{}}\PYG{p}{,} \PYG{n}{province}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{Iud\PYGZdq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} 5\PYGZhy{}chronological periods}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{prex}\PYG{p}{(}\PYG{n}{x}\PYG{o}{=}\PYG{n}{iud}\PYG{p}{,} \PYG{n}{taq}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}before\PYGZdq{}}\PYG{p}{,} \PYG{n}{tpq}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}after\PYGZdq{}}\PYG{p}{,} \PYG{n}{cp}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{bin5\PYGZdq{}}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}  Arch     Class      Hell       Rom       Byz}
\PYG{c+c1}{\PYGZsh{} 0.000     0.000  1337.904 13405.017     0.000}

\PYG{c+c1}{\PYGZsh{} 8\PYGZhy{}chronological periods}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{prex}\PYG{p}{(}\PYG{n}{x}\PYG{o}{=}\PYG{n}{iud}\PYG{p}{,} \PYG{n}{taq}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}before\PYGZdq{}}\PYG{p}{,} \PYG{n}{tpq}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}after\PYGZdq{}}\PYG{p}{,} \PYG{n}{cp}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{bin8\PYGZdq{}}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}  Arch     Class      Hell      ERom      MRom      LRom      EByz      LByz}
\PYG{c+c1}{\PYGZsh{}0.0000    0.0000 1337.9040 2396.4529 1200.5623  320.5379    0.0000    0.0000}
\end{sphinxVerbatim}
\end{quote}



\subsubsection{Plotting aoristic sum}
\label{\detokenize{Uncertainty:plotting-aoristic-sum}}
To visualize the aoristic sum from \sphinxcode{\sphinxupquote{Iudaea}} as bar plots and function \sphinxcode{\sphinxupquote{prex()}}
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{}  five chronological phases}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{barplot}\PYG{p}{(}\PYG{n+nf}{prex}\PYG{p}{(}\PYG{n}{x}\PYG{o}{=}\PYG{n}{iud}\PYG{p}{,} \PYG{n}{taq}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}before\PYGZdq{}}\PYG{p}{,} \PYG{n}{tpq}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}after\PYGZdq{}}\PYG{p}{,} \PYG{n}{cp}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{bin5\PYGZdq{}}\PYG{p}{)}\PYG{p}{,}
\PYG{o}{+}          \PYG{n}{main}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{Aoristic sum Iudaea (5\PYGZhy{}periods)\PYGZdq{}} \PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} eight chronological phases}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{barplot}\PYG{p}{(}\PYG{n+nf}{prex}\PYG{p}{(}\PYG{n}{x}\PYG{o}{=}\PYG{n}{iud}\PYG{p}{,} \PYG{n}{taq}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}before\PYGZdq{}}\PYG{p}{,} \PYG{n}{tpq}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}after\PYGZdq{}}\PYG{p}{,} \PYG{n}{cp}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{bin8\PYGZdq{}}\PYG{p}{)}\PYG{p}{,}
\PYG{o}{+}          \PYG{n}{horiz}\PYG{o}{=}\PYG{k+kc}{TRUE}\PYG{p}{,} \PYG{n}{las}\PYG{o}{=}\PYG{l+m}{1}\PYG{p}{,} \PYG{n}{main}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{Aoristic sum Iudaea (8\PYGZhy{}periods)\PYGZdq{}} \PYG{p}{)}
\end{sphinxVerbatim}
\end{quote}

that produce



\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline

\noindent\sphinxincludegraphics[width=250\sphinxpxdimen]{{AoristicSumIUDBins5}.png}
&
\noindent\sphinxincludegraphics[width=275\sphinxpxdimen]{{AoristicSumIUDBins8}.png}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\begin{quote}


\sphinxstrong{See also:}


{\hyperref[\detokenize{Time:edhrd}]{\sphinxcrossref{\DUrole{std,std-ref}{Relative dating of Roman inscriptions}}}}


\end{quote}




\section{Markov chain Monte Carlo}
\label{\detokenize{MCMC:markov-chain-monte-carlo}}\label{\detokenize{MCMC:mcmc}}\label{\detokenize{MCMC::doc}}

\subsection{Monte Carlo}
\label{\detokenize{MCMC:monte-carlo}}
\sphinxstyleemphasis{Monte Carlo} (term coined by S. Ulam and N. Metropolis) refers to the method of
generating random numbers from a certain distribution.

For dealing with {\hyperref[\detokenize{Uncertainty:uncertainty}]{\sphinxcrossref{\DUrole{std,std-ref}{temporal uncertainty}}}}, for example, a Monte Carlo method consists on
creating artificial “potential” time series within the boundary of existence, and then
assessing the likelihood of the variable’s character state over time.


\subsection{Markov chain}
\label{\detokenize{MCMC:markov-chain}}
A \sphinxstyleemphasis{Markov chain} (after A. Markov) is a sequence of numbers where each number is dependent on the previous
number in the sequence.

To simulate a Markov chain whose equilibrium distribution is a posterior density \(p(x)\) defined on
the set of possible configurations of a system, we use Markov chain Monte Carlo (MCMC) methods.

Some MCMC algorithms:
\begin{itemize}
\item {} 
Metropolis\sphinxhyphen{}Hastings

\item {} 
Gibbs sampling

\item {} 
Random walk Metropolis

\end{itemize}

Alternative to MCMC:
\begin{itemize}
\item {} 
Importance/rejection sampling (used to evaluate the probability of rare events)

\end{itemize}


MCMC is used to fit a model and to draw samples from the joint posterior distribution of the model parameters.
\begin{itemize}
\item {} 
(see {\hyperref[\detokenize{MCMC:bayes}]{\sphinxcrossref{\DUrole{std,std-ref}{Bayesian statistics}}}})

\end{itemize}



\subsection{Metropolis\sphinxhyphen{}Hastings}
\label{\detokenize{MCMC:metropolis-hastings}}
The \sphinxstyleemphasis{Metropolis\sphinxhyphen{}Hastings} algorithm serves to generate a sample from the posterior distribution
of \(\theta\), which is the parameter of the data point’s distribution.



\subsubsection{Algorithm}
\label{\detokenize{MCMC:algorithm}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Initialise \(x_0\)

\item {} 
For \(i=0\) to \(N-1\)
\begin{quote}

Sample \(u \sim U(0, 1)\)  uniform distribution

Sample \(x^\star \sim q(x^\star \mid x_t)\)  candidate point on a proposal distribution

If \(u < U() = \min\{1, \frac{p(x^\star) \; q(x_t \mid x^\star)}{p(x_t) \; q(x^\star \mid x_t)}\}\)
\begin{quote}

\(x_{(t+1)} = x^\star\)  accept candidate
\end{quote}

Else
\begin{quote}

\(x_{(t+1)} = x_t\)  increment time and sample \(x^\star\) until \(t_{\max}\) is reached.
\end{quote}
\end{quote}

\end{enumerate}



\subsection{Diagnostics}
\label{\detokenize{MCMC:diagnostics}}
Diagnostics is to assess the MCMC performance.

The trace plot (or time\sphinxhyphen{}series plot) is to judge how quickly the MCMC procedure converges in distribution.

When the variability is not the same over all iterations, the trace plot presents a “random walk” pattern.



\subsubsection{Burn\sphinxhyphen{}in}
\label{\detokenize{MCMC:burn-in}}
First generate a series of random numbers from a normal distribution with a mean value and some arbitrary variance.
\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{MCMC:id1}}Todo:}
Throwing away early samples is called burn\sphinxhyphen{}in…
\end{sphinxadmonition}
\end{quote}



\subsubsection{MCMC Simulation}
\label{\detokenize{MCMC:mcmc-simulation}}\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{MCMC:id2}}Todo:}
After the burn\sphinxhyphen{}in, are the MCM iterations…
\end{sphinxadmonition}
\end{quote}



\subsubsection{Thinning}
\label{\detokenize{MCMC:thinning}}\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{MCMC:id3}}Todo:}
Thinning interval for reducing autocorrelation of random points in the sampling…
\end{sphinxadmonition}
\end{quote}



\subsubsection{Convergence}
\label{\detokenize{MCMC:convergence}}
Convergence in MCMC is obtained when these outcomes become minimal with the increase of \(n\):
\begin{itemize}
\item {} 
the change in the variance

\item {} 
the standard error

\end{itemize}



\subsection{Summed probability distribution}
\label{\detokenize{MCMC:summed-probability-distribution}}\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{MCMC:id4}}Todo:}
A proxy for population levels is found in summed probability distributions (SPD) of dates,
which is the summation of the posterior probability distributions of calibrated dates.
\end{sphinxadmonition}
\end{quote}



\subsection{Bayesian statistics}
\label{\detokenize{MCMC:bayesian-statistics}}\label{\detokenize{MCMC:bayes}}
Markov chain Monte Carlo is a tool for sampling from distributions with high dimensionality,
which is a need typically found in some Bayesian statistics contexts.

Bayesian analysis implies Bayesian inference, model fitting, and performing inferential and
predictive summaries with predictive checks.

As mentioned in {\hyperref[\detokenize{Uncertainty:uncertainty}]{\sphinxcrossref{\DUrole{std,std-ref}{temporal uncertainty}}}}, the subjective approach in
assigning probabilities includes a certain degree of belief or knowledge to the probability,
and this is to arrive at a posterior distribution to updated the state of knowledge about the
parameters.



\subsubsection{Bayes theorem}
\label{\detokenize{MCMC:bayes-theorem}}\label{\detokenize{MCMC:bayest}}
Key concepts in Bayesian statistics are related in Bayes theorem, which is a rule
that provides the conditional probability of \(\theta\) (model or hypothesis)
occurring given that \(x\) (data or observation) already happened.

\(P(\theta \mid x) \;=\; \frac{ P(\theta)~P(x \mid \theta)  } { P(x)  }\)

That is, the posterior probability of \(\theta\) given \(x\) where
\begin{itemize}
\item {} 
\(P(\theta \mid x)\) is the \sphinxstylestrong{posterior} probability of \(\theta\)

\item {} 
\(P(\theta)\) is the \sphinxstylestrong{prior} probability of \(\theta\)

\item {} 
\(P(x \mid \theta)\) is the \sphinxstylestrong{likelihood} of \(\theta\)

\item {} 
\(P(x)\) is the \sphinxstylestrong{unconditional} probability of \(x\)

\end{itemize}

Hence, the posterior is an updated degree of belief or knowledge based on the prior
with known probabilities. This is our posterior \sphinxstyleemphasis{target} distribution sometimes written
as \(P_{target}(\theta)\).

On the other hand, the likelihood is the probability that the hypothesis confers upon
the observation, and the probability of the observation irrespective of any hypothesis
is the unconditional probability of the observation.



\section{Epigraphic Networks using R}
\label{\detokenize{EpigraphicNetwork:epigraphic-networks-using-r}}\label{\detokenize{EpigraphicNetwork:edh-net}}\label{\detokenize{EpigraphicNetwork::doc}}
This post is about Epigraphic Networks based on measures of similarity of artefact assemblages and geographic proximity.



\subsection{Measuring similarity of artefact assemblages and geographic proximity}
\label{\detokenize{EpigraphicNetwork:measuring-similarity-of-artefact-assemblages-and-geographic-proximity}}
To measure similarity of artefact assemblages and geographic proximity, {[}R{]} package
\sphinxcode{\sphinxupquote{sdam}} provides the function \sphinxcode{\sphinxupquote{simil()}}, which allows assesing similarity by comparing
columns representing \textendash{}in this case\textendash{} different attributes for epigraphic inscriptions.



\subsubsection{Function usage}
\label{\detokenize{EpigraphicNetwork:function-usage}}\index{simil() (built\sphinxhyphen{}in function)@\spxentry{simil()}\spxextra{built\sphinxhyphen{}in function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{EpigraphicNetwork:simil}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{simil}}}{}{}
\end{fulllineitems}


\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} arguments supported (currently)}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{simil}\PYG{p}{(}\PYG{n}{x}\PYG{p}{,} \PYG{n}{att}\PYG{p}{,} \PYG{n}{null}\PYG{p}{,} \PYG{n}{uniq}\PYG{p}{,} \PYG{n}{diag.incl}\PYG{p}{)}
\end{sphinxVerbatim}

Which returns a square and valued matrix with similarity meassures based on simple match among variables.



\subsubsection{Parameters}
\label{\detokenize{EpigraphicNetwork:parameters}}
Formal arguments of \sphinxcode{\sphinxupquote{simil()}} are:
\begin{itemize}
\item {} 
\sphinxtitleref{x:}
\begin{quote}

a data frame with an \sphinxtitleref{id} column
\end{quote}

\item {} 
\sphinxtitleref{att:}
\begin{quote}

(vector) column(s) in \sphinxcode{\sphinxupquote{x}} representing attributes
\end{quote}

\end{itemize}



\subsubsection{Optional parameters}
\label{\detokenize{EpigraphicNetwork:optional-parameters}}\begin{itemize}
\item {} 
\sphinxtitleref{null:}
\begin{quote}

include in computation \sphinxcode{\sphinxupquote{NA}} or \sphinxcode{\sphinxupquote{NULLs}}?
\end{quote}

\item {} 
\sphinxtitleref{uniq:}
\begin{quote}

remove duplicates from \sphinxcode{\sphinxupquote{x}}?
\end{quote}

\item {} 
\sphinxtitleref{diag.incl:}
\begin{quote}

include entries in the matrix diagonal?
\end{quote}

\end{itemize}


At this point, the ID column represents the labels of the nodes. In
case that an ID column does not exists, then the first column is taken
as \sphinxstyleemphasis{id} provided that there are not duplicated entry names in \sphinxcode{\sphinxupquote{x}}.



\subsection{EDH dataset}
\label{\detokenize{EpigraphicNetwork:edh-dataset}}
We illustrate the use of the \sphinxcode{\sphinxupquote{simil()}} function with ancient inscriptions from
the Epigraphic Database Heidelberg, and we first follow the entry {\hyperref[\detokenize{Epigraphic:edh}]{\sphinxcrossref{\DUrole{std,std-ref}{Epigraphic Database Heidelberg}}}}
to see how accessing the \sphinxcode{\sphinxupquote{EDH}} dataset using \sphinxcode{\sphinxupquote{sdam}} {[}R{]} package.


\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} devtools::install\PYGZus{}github(\PYGZdq{}mplex/cedhar\PYGZdq{}, subdir=\PYGZdq{}pkg/sdam\PYGZdq{})}
\PYG{c+c1}{\PYGZsh{} devtools::install\PYGZus{}github(\PYGZdq{}sdam\PYGZhy{}au/sdam\PYGZdq{})}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{library}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{sdam\PYGZdq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} load the EDH data from this package}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{data}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{EDH\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}



\subsubsection{Epigraphic network data}
\label{\detokenize{EpigraphicNetwork:epigraphic-network-data}}
Creating epigraphic network data list with variables measures of similarity of artefact assemblages and geographic proximity.
For example, a list object named \sphinxcode{\sphinxupquote{epinet}} with the \sphinxcode{\sphinxupquote{ID}} of the inscription plus seven other characteristics from
the \sphinxcode{\sphinxupquote{EDH}} dataset is produced by \sphinxcode{\sphinxupquote{edhw()}}.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} choose variables of interest and record it as a data frame}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{epinet} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{edhw}\PYG{p}{(}\PYG{n+nf}{c}\PYG{p}{(}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{type\PYGZus{}of\PYGZus{}monument\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{language\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{material\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{country\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{findspot\PYGZus{}ancient\PYGZdq{}}\PYG{p}{,}
                    \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}after\PYGZdq{}}\PYG{p}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{not\PYGZus{}before\PYGZdq{}}\PYG{p}{)}\PYG{p}{,} \PYG{n}{as}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{df\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}


Take a look at this data:

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} first eight entries in the data frame}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{head}\PYG{p}{(}\PYG{n}{epinet}\PYG{p}{,} \PYG{l+m}{8}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}        id country findspot\PYGZus{}ancient language                                material not\PYGZus{}after not\PYGZus{}before   type\PYGZus{}of\PYGZus{}inscription}
\PYG{c+c1}{\PYGZsh{}1 HD000001   Italy       Cumae, bei    Latin                Marmor, geädert / farbig      0130       0071               epitaph}
\PYG{c+c1}{\PYGZsh{}2 HD000002   Italy             Roma    Latin       marble: rocks \PYGZhy{} metamorphic rocks      0200       0051               epitaph}
\PYG{c+c1}{\PYGZsh{}3 HD000003   Spain             \PYGZlt{}NA\PYGZgt{}    Latin       marble: rocks \PYGZhy{} metamorphic rocks      0170       0131 honorific inscription}
\PYG{c+c1}{\PYGZsh{}4 HD000004   Spain    Ipolcobulcula    Latin    limestone: rocks \PYGZhy{} clastic sediments      0200       0151    votive inscription}
\PYG{c+c1}{\PYGZsh{}5 HD000005   Italy             Roma    Latin                                    \PYGZlt{}NA\PYGZgt{}      0200       0001               epitaph}
\PYG{c+c1}{\PYGZsh{}6 HD000006   Spain      Sabora, bei    Latin    limestone: rocks \PYGZhy{} clastic sediments      0150       0071               epitaph}
\PYG{c+c1}{\PYGZsh{}7 HD000007   Italy             Roma    Latin travertine: rocks \PYGZhy{} chemische Sedimente     \PYGZhy{}0051      \PYGZhy{}0100               epitaph}
\PYG{c+c1}{\PYGZsh{}8 HD000008   Italy            Roma?    Latin       marble: rocks \PYGZhy{} metamorphic rocks      0200       0101               epitaph}
\end{sphinxVerbatim}

For instance, entry \sphinxcode{\sphinxupquote{8}} indicates that this ancient findspot is uncertain.



\paragraph{Regular expressions}
\label{\detokenize{EpigraphicNetwork:regular-expressions}}
To remove question marks, for example, we use a regular expression

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{epinet2} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{as.data.frame}\PYG{p}{(}\PYG{n+nf}{sapply}\PYG{p}{(}\PYG{n}{epinet}\PYG{p}{,} \PYG{n+nf}{function }\PYG{p}{(}\PYG{n}{x}\PYG{p}{)}  \PYG{n+nf}{as.list}\PYG{p}{(}\PYG{n+nf}{gsub}\PYG{p}{(}\PYG{l+s}{\PYGZsq{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}?\PYGZsq{}}\PYG{p}{,} \PYG{l+s}{\PYGZsq{}}\PYG{l+s}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{x}\PYG{p}{)}\PYG{p}{)} \PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{quote}

\begin{sphinxadmonition}{note}{\label{\detokenize{EpigraphicNetwork:id1}}Todo:}
Make another function for cleaning? After all, \sphinxcode{\sphinxupquote{sapply()}} converts \sphinxcode{\sphinxupquote{\textless{}NA\textgreater{}}} into \sphinxcode{\sphinxupquote{NA}}.
\end{sphinxadmonition}
\end{quote}


And then we take a look at \sphinxcode{\sphinxupquote{epinet2}} again, and we assume the questioned entries.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} first eight entries in the new data frame}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{head}\PYG{p}{(}\PYG{n}{epinet2}\PYG{p}{,} \PYG{l+m}{8}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}        id country findspot\PYGZus{}ancient language                                material not\PYGZus{}after not\PYGZus{}before   type\PYGZus{}of\PYGZus{}inscription}
\PYG{c+c1}{\PYGZsh{}1 HD000001   Italy       Cumae, bei    Latin                Marmor, geädert / farbig      0130       0071               epitaph}
\PYG{c+c1}{\PYGZsh{}2 HD000002   Italy             Roma    Latin       marble: rocks \PYGZhy{} metamorphic rocks      0200       0051               epitaph}
\PYG{c+c1}{\PYGZsh{}3 HD000003   Spain               NA    Latin       marble: rocks \PYGZhy{} metamorphic rocks      0170       0131 honorific inscription}
\PYG{c+c1}{\PYGZsh{}4 HD000004   Spain    Ipolcobulcula    Latin    limestone: rocks \PYGZhy{} clastic sediments      0200       0151    votive inscription}
\PYG{c+c1}{\PYGZsh{}5 HD000005   Italy             Roma    Latin                                      NA      0200       0001               epitaph}
\PYG{c+c1}{\PYGZsh{}6 HD000006   Spain      Sabora, bei    Latin    limestone: rocks \PYGZhy{} clastic sediments      0150       0071               epitaph}
\PYG{c+c1}{\PYGZsh{}7 HD000007   Italy             Roma    Latin travertine: rocks \PYGZhy{} chemische Sedimente     \PYGZhy{}0051      \PYGZhy{}0100               epitaph}
\PYG{c+c1}{\PYGZsh{}8 HD000008   Italy             Roma    Latin       marble: rocks \PYGZhy{} metamorphic rocks      0200       0101               epitaph}
\end{sphinxVerbatim}


The countries in \sphinxcode{\sphinxupquote{epinet2}} are:

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} need first to unlist the component object}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{unique}\PYG{p}{(}\PYG{n+nf}{unlist}\PYG{p}{(}\PYG{n}{epinet2}\PYG{o}{\PYGZdl{}}\PYG{n}{country}\PYG{p}{)}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{} [1] \PYGZdq{}Italy\PYGZdq{}                  \PYGZdq{}Spain\PYGZdq{}                  \PYGZdq{}United Kingdom\PYGZdq{}         \PYGZdq{}Portugal\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{} [5] \PYGZdq{}France\PYGZdq{}                 \PYGZdq{}Libyan Arab Jamahiriya\PYGZdq{} \PYGZdq{}Germany\PYGZdq{}                \PYGZdq{}Hungary\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{} [9] \PYGZdq{}Austria\PYGZdq{}                \PYGZdq{}Bulgaria\PYGZdq{}               \PYGZdq{}Bosnia and Herzegovina\PYGZdq{} \PYGZdq{}Montenegro\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[13] \PYGZdq{}Netherlands\PYGZdq{}            \PYGZdq{}Tunisia\PYGZdq{}                \PYGZdq{}Romania\PYGZdq{}                \PYGZdq{}Algeria\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[17] \PYGZdq{}Jordan\PYGZdq{}                 \PYGZdq{}NULL\PYGZdq{}                   \PYGZdq{}Croatia\PYGZdq{}                \PYGZdq{}Switzerland\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[21] \PYGZdq{}Belgium\PYGZdq{}                \PYGZdq{}Albania\PYGZdq{}                \PYGZdq{}Serbia\PYGZdq{}                 \PYGZdq{}Egypt\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[25] \PYGZdq{}Syrian Arab Republic\PYGZdq{}   \PYGZdq{}Morocco\PYGZdq{}                \PYGZdq{}Turkey\PYGZdq{}                 \PYGZdq{}Lebanon\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[29] \PYGZdq{}Kosovo\PYGZdq{}                 \PYGZdq{}Macedonia\PYGZdq{}              \PYGZdq{}Slovakia\PYGZdq{}               \PYGZdq{}Greece\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[33] \PYGZdq{}Slovenia\PYGZdq{}               \PYGZdq{}Iraq\PYGZdq{}                   \PYGZdq{}Israel\PYGZdq{}                 \PYGZdq{}unknown\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[37] \PYGZdq{}Vatican City State\PYGZdq{}     \PYGZdq{}Ukraine\PYGZdq{}                \PYGZdq{}Cyprus\PYGZdq{}                 \PYGZdq{}Yemen\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[41] \PYGZdq{}Sudan\PYGZdq{}                  \PYGZdq{}Luxembourg\PYGZdq{}             \PYGZdq{}Czech Republic\PYGZdq{}         \PYGZdq{}Malta\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[45] \PYGZdq{}Poland\PYGZdq{}                 \PYGZdq{}Armenia\PYGZdq{}                \PYGZdq{}Monaco\PYGZdq{}                 \PYGZdq{}Azerbaijan\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[49] \PYGZdq{}Sweden\PYGZdq{}                 \PYGZdq{}Denmark\PYGZdq{}                \PYGZdq{}Moldova\PYGZdq{}                \PYGZdq{}Saudi Arabia\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}[53] \PYGZdq{}Uzbekistan\PYGZdq{}             \PYGZdq{}Liechtenstein\PYGZdq{}          \PYGZdq{}Georgia\PYGZdq{}}
\end{sphinxVerbatim}



\paragraph{Subsetting the data}
\label{\detokenize{EpigraphicNetwork:subsetting-the-data}}
For example, we use the \sphinxcode{\sphinxupquote{base}} {[}R{]} function \sphinxcode{\sphinxupquote{subset()}} to substract epigraphic material in “Greek\sphinxhyphen{}Latin” from Egypt.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} a subset of a subset}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{subset}\PYG{p}{(}\PYG{n+nf}{subset}\PYG{p}{(}\PYG{n}{epinet2}\PYG{p}{,} \PYG{n}{country}\PYG{o}{==}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{Egypt\PYGZdq{}}\PYG{p}{)}\PYG{p}{,} \PYG{n}{language}\PYG{o}{==}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{Greek\PYGZhy{}Latin\PYGZdq{}}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}            id country findspot\PYGZus{}ancient    language    material not\PYGZus{}after not\PYGZus{}before     type\PYGZus{}of\PYGZus{}monument}
\PYG{c+c1}{\PYGZsh{}2003  HD002009   Egypt           Philae Greek\PYGZhy{}Latin          NA        NA      \PYGZhy{}0116 architectural member}
\PYG{c+c1}{\PYGZsh{}23091 HD023319   Egypt               NA Greek\PYGZhy{}Latin Holz, Wachs        NA       0145              diptych}
\PYG{c+c1}{\PYGZsh{}23138 HD023368   Egypt            Syene Greek\PYGZhy{}Latin          NA        NA      \PYGZhy{}0029                   NA}
\PYG{c+c1}{\PYGZsh{}27345 HD024001   Egypt               NA Greek\PYGZhy{}Latin Holz, Wachs        NA       0145              diptych}
\PYG{c+c1}{\PYGZsh{}27351 HD024009   Egypt            Syene Greek\PYGZhy{}Latin          NA        NA      \PYGZhy{}0029                   NA}
\PYG{c+c1}{\PYGZsh{}32500 HD030457   Egypt       Alexandria Greek\PYGZhy{}Latin          NA      0011       0010                   NA}
\PYG{c+c1}{\PYGZsh{}34436 HD032412   Egypt          Schedia Greek\PYGZhy{}Latin          NA        NA         NA                   NA}
\PYG{c+c1}{\PYGZsh{}51198 HD049264   Egypt         Berenice Greek\PYGZhy{}Latin          NA        NA       0006                cliff}
\PYG{c+c1}{\PYGZsh{}54194 HD052276   Egypt       Alexandria Greek\PYGZhy{}Latin          NA      0225       0155                stele}
\PYG{c+c1}{\PYGZsh{}58318 HD056791   Egypt         Berenice Greek\PYGZhy{}Latin          NA      0200       0001                stele}
\PYG{c+c1}{\PYGZsh{}70110 HD068637   Egypt      Leontopolis Greek\PYGZhy{}Latin          NA     \PYGZhy{}0030      \PYGZhy{}0037                   NA}
\end{sphinxVerbatim}



\paragraph{Ranked frequency}
\label{\detokenize{EpigraphicNetwork:ranked-frequency}}
A ranked frequency of different \sphinxstyleemphasis{kinds of inscriptions} including missing information is computed as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{as.data.frame}\PYG{p}{(}\PYG{n+nf}{sort}\PYG{p}{(}\PYG{n+nf}{table}\PYG{p}{(}\PYG{n+nf}{unlist}\PYG{p}{(}\PYG{n}{epinet2}\PYG{o}{\PYGZdl{}}\PYG{n}{type\PYGZus{}of\PYGZus{}inscription}\PYG{p}{)}\PYG{p}{,} \PYG{n}{useNA}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{ifany\PYGZdq{}}\PYG{p}{)}\PYG{p}{,} \PYG{n}{decreasing}\PYG{o}{=}\PYG{k+kc}{TRUE}\PYG{p}{)}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}                              Var1  Freq}
\PYG{c+c1}{\PYGZsh{}1                          epitaph 27898}
\PYG{c+c1}{\PYGZsh{}2                             \PYGZlt{}NA\PYGZgt{} 21883}
\PYG{c+c1}{\PYGZsh{}3               votive inscription 14213}
\PYG{c+c1}{\PYGZsh{}4         owner/artist inscription  4876}
\PYG{c+c1}{\PYGZsh{}5            honorific inscription  4314}
\PYG{c+c1}{\PYGZsh{}6  building/dedicatory inscription  3378}
\PYG{c+c1}{\PYGZsh{}7                mile\PYGZhy{}/leaguestone  1713}
\PYG{c+c1}{\PYGZsh{}8       identification inscription  1353}
\PYG{c+c1}{\PYGZsh{}9                 military diploma   507}
\PYG{c+c1}{\PYGZsh{}10                     acclamation   495}
\PYG{c+c1}{\PYGZsh{}11                            list   356}
\PYG{c+c1}{\PYGZsh{}12                         defixio   309}
\PYG{c+c1}{\PYGZsh{}13                           label   266}
\PYG{c+c1}{\PYGZsh{}14        public legal inscription   254}
\PYG{c+c1}{\PYGZsh{}15            boundary inscription   252}
\PYG{c+c1}{\PYGZsh{}16                         elogium   154}
\PYG{c+c1}{\PYGZsh{}17                seat inscription    86}
\PYG{c+c1}{\PYGZsh{}18                          prayer    56}
\PYG{c+c1}{\PYGZsh{}19                          letter    39}
\PYG{c+c1}{\PYGZsh{}20       private legal inscription    34}
\PYG{c+c1}{\PYGZsh{}21         assignation inscription    13}
\PYG{c+c1}{\PYGZsh{}22                        calendar    12}
\PYG{c+c1}{\PYGZsh{}23                     adnuntiatio     3}
\end{sphinxVerbatim}

That is, a decreasing sorted table given as data frame of the \sphinxcode{\sphinxupquote{type\_of\_inscription}}
component of \sphinxcode{\sphinxupquote{epinet2}}. Since \sphinxcode{\sphinxupquote{epinet2}} is a list object, it is required to \sphinxstyleemphasis{unlist} the
data object to produce a table with the frequencies.



\subsection{Example: Similarity among Egyptian epigraphs}
\label{\detokenize{EpigraphicNetwork:example-similarity-among-egyptian-epigraphs}}
We can compute similarity among Egyptian epigraphs with function \sphinxcode{\sphinxupquote{simil()}}.
For this, we look at the attribute types stored in different columns.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{as.data.frame}\PYG{p}{(}\PYG{n+nf}{colnames}\PYG{p}{(}\PYG{n}{epinet2}\PYG{p}{)}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}    colnames(epinet2)}
\PYG{c+c1}{\PYGZsh{}1                  id}
\PYG{c+c1}{\PYGZsh{}2             country}
\PYG{c+c1}{\PYGZsh{}3    findspot\PYGZus{}ancient}
\PYG{c+c1}{\PYGZsh{}4            language}
\PYG{c+c1}{\PYGZsh{}5            material}
\PYG{c+c1}{\PYGZsh{}6           not\PYGZus{}after}
\PYG{c+c1}{\PYGZsh{}7          not\PYGZus{}before}
\PYG{c+c1}{\PYGZsh{}8 type\PYGZus{}of\PYGZus{}inscription}
\end{sphinxVerbatim}


For instance, in case we want to choose \sphinxcode{\sphinxupquote{"type\_of\_inscription"}}, \sphinxcode{\sphinxupquote{"material"}}, and \sphinxcode{\sphinxupquote{"findspot\_ancient"}},
these correspond to columns 8, 5, and 3.

Similarities among Egyptian epigraphs \sphinxtitleref{by simple matching} with the above attribute variables are recorded in
a matrix object named \sphinxcode{\sphinxupquote{epEgs}} where the \sphinxcode{\sphinxupquote{ID}} in \sphinxcode{\sphinxupquote{epinet2}} corresponds to the dimensions labels.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} similarity function on the subset for the three variables}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{epEgs} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{simil}\PYG{p}{(}\PYG{n+nf}{subset}\PYG{p}{(}\PYG{n}{epinet2}\PYG{p}{,} \PYG{n}{country}\PYG{o}{==}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{Egypt\PYGZdq{}}\PYG{p}{)}\PYG{p}{,} \PYG{n+nf}{c}\PYG{p}{(}\PYG{l+m}{8}\PYG{p}{,}\PYG{l+m}{5}\PYG{p}{,}\PYG{l+m}{6}\PYG{p}{)}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} number of rows in this square matrix}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{nrow}\PYG{p}{(}\PYG{n}{epEgs}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{}[1] 175}
\end{sphinxVerbatim}


And then we look at some cell entries

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} similarity between the first six inscriptions in \PYGZsq{}epEgs\PYGZsq{}}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{epEgs}\PYG{n}{[1}\PYG{o}{:}\PYG{l+m}{6}\PYG{p}{,} \PYG{l+m}{1}\PYG{o}{:}\PYG{l+m}{6}\PYG{n}{]}
\PYG{c+c1}{\PYGZsh{}         HD000744 HD002009 HD003137 HD006817 HD006820 HD008184}
\PYG{c+c1}{\PYGZsh{}HD000744        0        1        1        0        0        0}
\PYG{c+c1}{\PYGZsh{}HD002009        1        0        0        0        0        0}
\PYG{c+c1}{\PYGZsh{}HD003137        1        0        0        0        0        0}
\PYG{c+c1}{\PYGZsh{}HD006817        0        0        0        0        1        0}
\PYG{c+c1}{\PYGZsh{}HD006820        0        0        0        1        0        0}
\PYG{c+c1}{\PYGZsh{}HD008184        0        0        0        0        0        0}
\end{sphinxVerbatim}

where we observe six records of a single similarity.



\subsubsection{Plot similarities}
\label{\detokenize{EpigraphicNetwork:plot-similarities}}
To produce a graph for the similarity among Egyptian epigraphs, we employ the {[}R{]} package \sphinxcode{\sphinxupquote{multigraph}} that
depends on \sphinxcode{\sphinxupquote{multiplex}}.

\begin{sphinxVerbatim}[commandchars=\\\{\},formatcom=\footnotesize]
\PYG{c+c1}{\PYGZsh{} define scope for the graph}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n}{scp} \PYG{o}{\PYGZlt{}\PYGZhy{}} \PYG{n+nf}{list}\PYG{p}{(}\PYG{n}{directed}\PYG{o}{=}\PYG{k+kc}{FALSE}\PYG{p}{,} \PYG{n}{valued}\PYG{o}{=}\PYG{k+kc}{TRUE}\PYG{p}{,} \PYG{n}{ecol}\PYG{o}{=}\PYG{l+m}{8}\PYG{p}{,} \PYG{n}{pos}\PYG{o}{=}\PYG{l+m}{0}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} load \PYGZdq{}multigraph\PYGZdq{} where \PYGZdq{}multiplex\PYGZdq{} gets invoked}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{library}\PYG{p}{(}\PYG{n}{multigraph}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} plot similarity graph of \PYGZsq{}epEgs\PYGZsq{} for the chosen variables}
\PYG{n}{R}\PYG{o}{\PYGZgt{}} \PYG{n+nf}{multigraph}\PYG{p}{(}\PYG{n}{epEgs}\PYG{p}{,} \PYG{n}{scope}\PYG{o}{=}\PYG{n}{scp}\PYG{p}{,} \PYG{n}{layout}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{force\PYGZdq{}}\PYG{p}{,} \PYG{n}{maxiter}\PYG{o}{=}\PYG{l+m}{70}\PYG{p}{,} \PYG{n}{main}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{Similarity among Egyptian epigraphs\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}


\index{graph@\spxentry{graph}}\ignorespaces 
\noindent\sphinxincludegraphics[width=450\sphinxpxdimen]{{epEgs}.png}


\section{Modules}
\label{\detokenize{modules:modules}}\label{\detokenize{modules::doc}}

\section{Indices and tables}
\label{\detokenize{index:indices-and-tables}}\begin{itemize}
\item {} 
\DUrole{xref,std,std-ref}{genindex}

\end{itemize}
\begin{itemize}
\item {} 
\DUrole{xref,std,std-ref}{search}

\end{itemize}


\subsection{Print}
\label{\detokenize{index:print}}\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{Download this document}}.

\end{itemize}



\renewcommand{\indexname}{Index}
\printindex
\end{document}